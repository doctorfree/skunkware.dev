<HTML>
<HEAD>
<TITLE>mh-gen</TITLE>
</HEAD>
<BODY>
<H1>mh-gen</H1>
<HR>
<PRE>
     <STRONG>NAME</STRONG>
          mh-gen - generating the MH system

     <STRONG>READ</STRONG> <STRONG>THIS</STRONG>
          This documentation describes how to configure, generate, and
          install the UCI version of the RAND <EM>MH</EM> system.  <STRONG>Be</STRONG> <STRONG>certain</STRONG>
          to read this document completely before you begin.  You
          probably will also want to familiarize yourself with the <EM>MH</EM>
          Administrator's Guide before you install <EM>MH</EM>.  A copy can be
          found in the file <STRONG>doc/ADMIN.doc</STRONG> is the <EM>MH</EM> sources.

     <STRONG>DISCLAIMER</STRONG>
          Although the <EM>MH</EM> system was originally developed by the RAND
          Corporation, and is now in the public domain, the RAND
          Corporation assumes no responsibility for <EM>MH</EM> or this
          particular modification of <EM>MH</EM>.

          In addition, the Regents of the University of California
          issue the following <STRONG>disclaimer</STRONG> in regard to the UCI version
          of <EM>MH</EM>:
               Although each program has been tested by its
               contributor, no warranty, express or implied, is made
               by the contributor or the University of California, as
               to the accuracy and functioning of the program and
               related program material, nor shall the fact of
               distribution constitute any such warranty, and no
               responsibility is assumed by the contributor or the
               University of California in connection herewith.

          This version of <EM>MH</EM> is in the public domain, and as such,
          there are no real restrictions on its use.  The <EM>MH</EM> source
          code and documentation have no licensing restrictions
          whatsoever.  As a courtesy, the authors ask only that you
          provide appropriate credit to the RAND Corporation and the
          University of California for having developed the software.

     <STRONG>GETTING</STRONG> <STRONG>HELP</STRONG>
          <EM>MH</EM> is a software package that is neither supported by the
          RAND Corporation nor the University of California.  However,
          since we do use the software ourselves and plan to continue
          using (and improving) <EM>MH</EM>, bug reports and their associated
          fixes should be reported back to us so that we may include
          them in future releases.  The current computer mailbox for
          <EM>MH</EM> is <STRONG>Bug-MH@ICS.UCI.EDU</STRONG> (in the ARPA Internet), and
          <STRONG>...!ucbvax!ucivax!bug-mh</STRONG> (UUCP).

          Presently, there are two Internet discussion groups,
          <STRONG>MH-Users@ICS.UCI.EDU</STRONG> and <STRONG>MH-Workers@ICS.UCI.EDU</STRONG>.  <STRONG>MH-Workers</STRONG>
          is for people discussing code changes to <EM>MH</EM>.  <STRONG>MH-Users</STRONG> is
          for general discussion about how to use <EM>MH</EM>.  <STRONG>MH-Users</STRONG> is
          bi-directionally gatewayed into USENET as <STRONG>comp.mail.mh</STRONG>.

     <STRONG>HOW</STRONG> <STRONG>TO</STRONG> <STRONG>GET</STRONG> <STRONG>MH</STRONG>
          Since you probably already have <EM>MH</EM>, you may not need to read
          this unless you suspect you have an old version.  There are
          two ways to get the latest release:

          1.  If you can FTP to the ARPA Internet, use anonymous FTP
          to ftp.ics.uci.edu [128.195.1.1] and retrieve the file
          pub/mh/mh-6.8.tar.Z.  This is a tar image after being run
          through the compress program (approximately 1.8MB).  There
          should also be a <STRONG>README</STRONG> file in that directory which tells
          what the current release of <EM>MH</EM> is, and how to get updates.

          This tar file is also available on louie.udel.edu
          [128.175.1.3] in portal/mh-6.8.tar.Z.  You may also find MH
          on various other hosts; to make sure you get the latest
          version and don't waste your time re-fixing bugs, it's best
          to get it from either ftp.ics.uci.edu or louie.udel.edu.

          2.  You can send $75 US to the address below.  This covers
          the cost of a 6250 BPI 9-track magtape, handling, and
          shipping.  In addition, you'll get a laser-printed hard-copy
          of the entire MH documentation set.  Be sure to include your
          USPS address with your check.  Checks must be drawn on U.S.
          funds and should be made payable to:

                    Regents of the University of California

          The distribution address is:

                    Univeristy of California at Irvine
                    Office of Academic Computing
                    360 Computer Science
                    Irvine, CA  92717  USA

                    +1 714 856 5153

          Sadly, if you just want the hard-copies of the
          documentation, you still have to pay the $75.  The tar image
          has the documentation source (the manual is in roff format,
          but the rest are in TeX format).  Postscript formatted
          versions of the TeX papers are available, as are crude tty-
          conversions of those papers.

     <STRONG>SYNOPSIS</STRONG>
          MAKE

     <STRONG>DESCRIPTION</STRONG>
          This is a description of how one can bring up an <EM>MH</EM> system.
          It is assumed that you have super-user privileges in order
          to (re-)install <EM>MH</EM>.  Super-user privileges are not required
          to configure or generate <EM>MH</EM>.

          Become the super-user and cd to /usr/src/local/ (or whatever
          you keep your local sources).  The distribution tape
          contains the hierarchy for the mh.6-8/ directory.  Bring the
          sources on-line:

          # cd /usr/src/local
          % tar xv
          % cd mh-6.8

     <STRONG>CONFIGURATION</STRONG>
          First, go to the conf/ directory.

          % cd conf/

          This directory contains files that will produce source files
          tailored for your choice of <EM>MH</EM> configuration.  You should
          edit only the file <STRONG>MH</STRONG>.  This file contains configuration
          directives.  These configuration directives are read by the
          <EM>mhconfig</EM> program to produce customized files.

          For examples of various configurations, look in the
          directory <STRONG>conf/examples/</STRONG>.  The file <STRONG>MH</STRONG> provided in <STRONG>conf/</STRONG> is
          a reasonable default.  Lines beginning with `#' are
          comments, and are not otherwise interpreted.

          Here are the <EM>MH</EM> configuration directives available.  Be sure
          to read through this list completely before attempting to
          decide what directives are appropriate for your system.

          More information on some of these options is available in
          the the <EM>Administrator</EM>'<STRONG>s</STRONG> <EM>Guide</EM>.  If you do not have a printed
          copy, you should configure your system with the default
          configuration file, <STRONG>MH</STRONG>, then generate and print a copy of
          the guide (as described below).

       <STRONG>Installation</STRONG> <STRONG>paths</STRONG>
          bin: /usr/local
               The directory where user-invoked programs go (see
               manual section 1).

          etc: /usr/local/lib/mh
               The directory where pgm-invoked programs go (see manual
               section 8).

          mail: /usr/spool/mail
               The directory where the maildrops are stored.  If this
               pathname is absolute (i.e., begins with a <STRONG>/</STRONG> ), then the
               user's maildrop is a file called <STRONG>$USER</STRONG> in this
               directory.  If the pathname is not absolute, then the
               user's maildrop is in the user's home directory under
               the given name.

          mandir: /usr/man
               The parent directory of the manual entries.

          manuals: standard
               Where manual entries should be installed, relative to
               the directory given with mandir.  Either local to
               install manual entries under <STRONG>manl/</STRONG>, or new to install
               manual entries under <STRONG>mann/</STRONG>, or old to install manual
               entries under <STRONG>mano/</STRONG>, or standard to install manual
               entries under <STRONG>man?/</STRONG>, or bsd44 to install manual entries
               as <STRONG>man?/</STRONG><EM>page</EM><STRONG>.0</STRONG>, or gen to generate but not install
               them, or none to neither generate nor install them.

               Any of these values may have the suffix /cat appended
               to it.   In that case, the manual entries will be
               formatted with nroff -man and they will be installed in
               the corresponding cat? directories.

               For example, to install manual entries under
               <STRONG>/usr/man/u_man/man?</STRONG>, use standard and <STRONG>/usr/man/u_man</STRONG>
               for mandir.  To install formatted manual entires under
               <STRONG>/usr/contrib/man/cat?</STRONG>, use standard/cat and
               <STRONG>/usr/contrib/man</STRONG> for mandir.  To install formatted
               manual entries using the BSD44 convention, use
               bsd44/cat.

          chown: /etc/chown
               The location of the <EM>chown</EM>(8) on your system.  If <EM>chown</EM>
               is in your search path, just use the value of chown.
               On SYS5 systems, this should probably be /bin/chown.

          cp: cp
               The command to copy files when installing, if not cp.
               (Some sites use cp -p.)

          ln: ln
               The command to link files together in the source tree,
               if not ln.  If you're using something like <STRONG>lndir</STRONG> to
               keep your compile tree separate from your source tree,
               set this to ln -s or cp.

          remove: mv -f
               How <EM>MH</EM> should make backup copies of existing files when
               installing new files.  To simply remove the old files,
               use rm -f.

       <STRONG>Compiler/loader</STRONG>
          cc: cc
               The name of your C compiler, if not cc.

          ccoptions: -O
               Options given directly to <EM>cc</EM>(1).  The most common is -M
               if you're running <EM>MH</EM> on an ALTOS.  This defaults to -O.
               If you define this and want to keep -O, be sure to
               include it explicitly.  If you're using the <EM>GNU</EM> C
               compiler, it should include `-traditional'.  See
               options: for `-D' options.

          curses: -lcurses -ltermlib
               This should be the loader option required to load the
               <EM>termcap</EM>(3) and <EM>curses</EM>(3) libraries on your system.  On
               SYS5 systems, it probably should be just -lcurses.
               Some sites have reported that both -lcurses and
               -ltermlib are necessary.

          ldoptions: -s
               Options given directly to <EM>ld</EM>(1) (via <EM>cc)</EM> at the
               beginning of the command line.  Useful for machines
               which require arguments to tell <EM>ld</EM> to increase the
               stack space (e.g. the Gould, which uses -m 8).
               Usually, -s is a good choice in any event.

          ldoptlibs:
               Options given directly to <EM>ld</EM>(1) (via <EM>cc)</EM> at the end of
               the command line.  The two most common are: -ldbm if
               you're running MMDF with the <EM>dbm</EM> package; and, -lndir
               if you are generating <EM>MH</EM> on a system which does not
               load the new directory access mechanism by default
               (e.g., 4.1BSD, SYS5).  If you don't have <EM>libndir</EM> on
               your system, the sources are in <STRONG>miscellany/libndir/</STRONG>.

          lex: lex -nt
               Alternative version of <EM>lex</EM>.  Used in <STRONG>zotnet/tws/</STRONG>.

          oldload: off
               This controls how <EM>MH</EM> will try to process library object
               files to eliminate local symbols.  Support for the
               ALTOS loader if on.  Support for loaders not handling
               `-x -r' correctly if none.

          ranlib: on
               Support for systems with <EM>ranlib</EM>(1).  For SYSTEM 5
               systems, this should be off which tells <EM>MH</EM> to use
               <EM>lorder</EM> and <EM>tsort</EM> instead.  Some SYSTEM 5 sites reported
               that running this isn't always sufficient.  If this is
               the case, then you should edit <STRONG>conf/makefiles/uip</STRONG> to
               include <STRONG>../sbr/libmh.a</STRONG> and <STRONG>../zotnet/libzot.a</STRONG> twice in
               the LIBES variable.

       <STRONG>Message</STRONG> <STRONG>Transport</STRONG> <STRONG>System</STRONG>
          mts: sendmail
               Which message transport system to use.  Either mmdf to
               use <EM>MMDF</EM> as the transport system, mmdf2 to use <EM>MMDF</EM>-<EM>II</EM>
               as the transport system, sendmail to have <EM>SendMail</EM> as
               the transport system, zmailer to have <EM>ZMAILER</EM> as the
               transport system, or, mh to have <EM>MH</EM> as the transport
               system.

               On UNIX systems supporting TCP/IP networking via
               sockets you can add the suffix /smtp to the mts
               setting.  This often yields a superior interface as <EM>MH</EM>
               will post mail with the local <EM>SMTP</EM> server instead of
               interacting directly with <EM>MMDF</EM> or <EM>SendMail</EM>.  Hence, for
               TCP/IP UNIX systems, the /smtp suffix to either
               sendmail or mmdf2 is the preferred MTS configuration.
               The /smtp suffix is described in detail in the
               <EM>Administrator</EM>'<STRONG>s</STRONG> <EM>Guide</EM>; be sure to set servers: as
               described in <EM>mh</EM>-<EM>tailor</EM>(8) if you use this option.

          mf: off
               Support for mail filtering on those systems in which
               the message transport system isn't integrated with <EM>UUCP</EM>
               This option is strictly for an <EM>MH</EM> system using either
               <EM>MMDF</EM>-<STRONG>I</STRONG> as its transport system or one using stand-alone
               delivery.

       <STRONG>UCI</STRONG> <STRONG>BBoards</STRONG> <STRONG>Facility</STRONG>
          bboards: off
               If on, include support for the UCI BBoards facility.
               BBoards may be enabled with any mts setting.  If off,
               the BBoard reading program <EM>bbc</EM> will not be installed.
               If nntp, include support for the UCI BBoards facility
               to read the Network News via the NNTP.  If pop
               (formerly popbboards: on), include support for the UCI
               BBoards facility via the POP3 service; this setting
               requires pop: on.

          bbdelivery: off
               If off, the BBoards delivery agent and library files
               will not be installed.  If on, and you set bboards: to
               something besides off, then the BBoards delivery agent
               and library files will be installed in the <EM>bbhome</EM>
               directory (see below).  To read remote BBoards, the
               usual configuration would have <EM>bbc</EM> talk to a <EM>POP3</EM> or
               <EM>NNTP</EM> server.  However, it may be useful to set this to
               off if you NFS mount the <EM>bbhome</EM> directory from another
               host and want to use <EM>bbc</EM> to read those files directly.

          bbhome: /usr/spool/bboards
               The home directory for the BBoards user.

       <STRONG>Post</STRONG> <STRONG>Office</STRONG> <STRONG>Protocol</STRONG>
          pop: off
               Support for POP service.  This allows local delivery
               for non-local users (a major win).  See
               <STRONG>support/pop/pop.rfc</STRONG> for more information on the POP.
               This option currently works only on UNIX systems with
               TCP/IP sockets.  (It doesn't hurt to enable this option
               regardless of whether or not you intend to use POP.)
               See also bboards: pop to enable reading bboards with
               the POP.

          popdir: /usr/etc
               The directory where the POP daemon (<STRONG>popd</STRONG>) will be
               installed.

          options:
               `-D' options to <EM>cc</EM>(1).

            APOP='/etc/pop.auth'
                 This option indicates that the POP daemon will
                 support the non-standard <STRONG>APOP</STRONG> command, and specifies
                 the name of <STRONG>APOP</STRONG> authorization database.  The <STRONG>APOP</STRONG>
                 command provides a challenge-based authentication
                 system using the <STRONG>MD5</STRONG> message digest algorithm.  This
                 facility is documented in <EM>The</EM> <EM>Internet</EM> <EM>Message</EM> (ISBN
                 0-13-092941-7), a book by Marshall T. Rose.

                 This option also causes the <STRONG>popauth</STRONG> program to be
                 installed, which allows the administrator to
                 manipulate the <STRONG>APOP</STRONG> authorization database.  For more
                 details, see <STRONG>support/pop/pop-more.txt</STRONG> and the
                 <EM>Administrator</EM>'<STRONG>s</STRONG> <EM>Guide</EM>.

            DPOP
                 This option indicates that POP subscribers do not
                 have entries in the <EM>passwd</EM>(5) file, and instead have
                 their own separate database (a win).

            KPOP
                 Support for KERBEROS with POP.  This code builds
                 <EM>popd</EM>, <EM>inc</EM> and <EM>msgchk</EM> to support only the kpop
                 protocol.  This code is still experimental, but is
                 available for those sites wishing to test it.

            MPOP
                 This option indicates that the POP daemon will
                 support the non-standard <STRONG>XTND</STRONG> <STRONG>SCAN</STRONG> command which
                 provides performance enhancements when using the POP
                 over low-speed connections.  This option also causes
                 an interactive POP client program, <STRONG>popi</STRONG>, to be
                 compiled and installed.  A man page for the <STRONG>popi</STRONG>
                 program is also provided.

                 These extensions are described in <EM>The</EM> <EM>Internet</EM>
                 <EM>Message</EM>, a book by Marshall T. Rose.  For more
                 details, see <STRONG>support/pop/pop-more.txt</STRONG>.  <STRONG>Note:</STRONG> this
                 option requires bboards: pop.

            POP2
                 Have the POP daemon understand the older POP2
                 protocol as well as the <EM>MH</EM> POP3 protocol - a major
                 win.  The POP daemon auto-magically determines which
                 POP protocol your client is using.  If you're
                 enabling POP service, there's no reason not to enable
                 this option as well.  See also <EM>POPSERVICE</EM>.

            POPSERVICE
                 The port name the <EM>MH</EM> POP will use.  For historical
                 reasons, this defaults to pop.

                 In 1987, the <EM>MH</EM> POP protocol (POP version 3) was
                 published as RFC1081 and was assigned its own port
                 number (110), which differs from the original POP
                 (version 1 and 2) port number (109).

                 To have <EM>MH</EM> POP use the new assigned port number, set
                 POPSERVICE='pop3', and be sure that this service name
                 is listed in your <STRONG>/etc/services</STRONG> file on both POP
                 client and server hosts as 110/tcp.  If you enable
                 <EM>POP2</EM>, you can safely leave <EM>POPSERVICE</EM> undefined
                 unless you are using POP3 clients besides <EM>MH</EM>.

            RPOP
                 This option indicates that support for the UNIX
                 variant of POP, RPOP, which uses privileged sockets
                 for authentication be enabled.  This peacefully co-
                 exists with the standard POP.

            SHADOW
                 Indicates that the <STRONG>popd</STRONG> POP server can find encrypted
                 passwords in the <STRONG>/etc/shadow</STRONG> file (and not in the
                 <STRONG>/etc/passwd</STRONG> file).  It should be used only for some
                 (newer) SYSTEM 5 systems.

              The APOP and MPOP non-standard POP facilities are
              documented in <EM>The</EM> <EM>Internet</EM> <EM>Message</EM> (ISBN 0-13-092941-7),
              a book by Marshall T. Rose.  For more details, see
              <STRONG>support/pop/pop-more.txt</STRONG>.  The APOP option peacefully
              co-exists with the standard POP.  The MPOP option
              requires bboards: pop.

      <STRONG>Shared</STRONG> <STRONG>libraries</STRONG>
         sharedlib: off
              If sun4, makes libmh.a into a SunOS 4.0 (and later)
              shared library.  If you enable this, be sure to also use
              options SUN40.  If sys5, makes libmh.a into a SYS5 R4
              (and later) shared library.  If you enable this, be sure
              to also use options SVR4.

         slflags: -pic
              The compiler flags to produce position independent code.

         slibdir: /usr/local/lib
              The directory where the <EM>MH</EM> shared library should go.

           Under SunOS (sun4)
              Since some <EM>MH</EM> programs are setuid, they'll only look for
              the library in trusted locations.  Putting the library
              somewhere besides <STRONG>/usr/lib</STRONG> or <STRONG>/usr/local/lib</STRONG> is not
              advisable.

              If you <STRONG>must</STRONG> do this, be sure that you add the path given
              by <STRONG>slibdir</STRONG> to the compiler's library search list (e.g.,
              ldoptions: -L/usr/mh/lib) and make sure the path starts
              with a leading `/'.

              You may need to run <EM>ldconfig</EM>(8) manually whenever a new
              shared object is installed on the system.  See <EM>ld</EM>(1) for
              more information about using shared libraries.

           Under Solaris 2.0 (and newer)
              The above instructions for SunOS apply, except you
              should set the run-time library search path using `-R'
              instead of `-L' (e.g., ldoptions: -R/usr/mh/lib).

      <STRONG>General</STRONG> <STRONG>System</STRONG> <STRONG>Dependencies</STRONG>
         You should include the following directives which are
         appropriate for your version of UNIX.  If you don't know what
         an option does, it probably doesn't apply to you.

         mailgroup: off
              If set, <EM>inc</EM> is made set-group-id to this group name.
              Some SYS5 systems want this to be set to mail.  Set this
              if your <STRONG>/usr/spool/mail</STRONG> is not world-writeable.

              Note that <STRONG>slocal</STRONG> doesn't know how to deal with this, and
              will not work under these systems; just making it set-
              group-id will open a security hole.  If you're using
              mailgroup, you should remove <STRONG>slocal</STRONG> (and its man page)
              from your system.

         signal: int
              The base type (int or void) of the function
              parameter/return value of <EM>signal</EM>(2).  The default is
              <STRONG>int</STRONG>.  Set signal void on systems which use this type
              (e.g., SYSTEM 5 V3.0 and later or Sun OS 4.0 and later).

         sprintf: char *
              The return value of the <EM>sprintf</EM> library routine.  This
              defaults to char *.  Set this to int if you have an
              older version of SYSTEM 5 which has this routine return
              an int type.

         options:
              `-D' options to <EM>cc</EM>(1).

           ALTOS
                Use on XENIX/v7 systems.  Also, be sure to use options
                V7.

           ATTVIBUG
                This option causes <EM>MH</EM> to return to the What now?
                prompt if your initial editor is <STRONG>vi</STRONG> and it exits with
                non-zero status.  Use on Sun OS 4.1 and other systems
                where the <STRONG>/usr/ucb/vi</STRONG> editor was changed to exit with
                its status equal to the number of pseudo-errors
                encountered during the edit.  This causes a problem
                for programs that test the exit status of their editor
                and abort if the status is non-zero.  (This includes
                <EM>MH</EM> and programs like <STRONG>/usr/etc/vipw</STRONG>).

           AUX
                Use with AUX systems.

           BIND
                If you are running with the BIND code on UNIX systems
                with TCP/IP sockets (e.g. 4.{2,3}BSD), be sure to
                define this.

           BSD41A
                Use on 4.1a Berkeley UNIX systems.

           BSD42
                Use on Berkeley UNIX systems on or after 4.2BSD.

           BSD43
                Use on 4.3 Berkeley UNIX systems.  Also, be sure to
                use options BSD42.  If <EM>openlog</EM>(3) (see man 3 syslog)
                takes three arguments instead of two, and your
                <EM>write</EM>(1) command is set-group-id to group tty, use
                this option.  If only one of these conditions is true,
                you lose.

           BSD44
                Use on Berkeley UNIX systems on or after 4.4BSD.
                Also, be sure to use options BSD43 and options BSD42.

           DBMPWD
                Use this option if your <EM>getpwent</EM>(3) routines read a
                dbm database (such as with Yellow Pages) instead of
                doing a sequential read of <STRONG>/etc/passwd</STRONG>.  Without
                DBMPWD the entire passwd file is read into memory one
                entry at a time for alias expansion.  This is a
                performance improvement when reading a standard
                <STRONG>/etc/passwd</STRONG> file, but is <EM>very</EM> slow on systems with a
                dbm database.  At one site that runs YP on a large
                passwd file, it showed a 6:1 performance improvement.

           GCOS_HACK
                The so-called gcos field of the password file is used
                as a last resort to find the user's full name (see
                <EM>mh</EM>-<EM>profile</EM>(5) for details).  Enable this option if
                your <EM>passwd</EM>(5) man page notes that the `&amp;' character
                in the gcos field stands for the login name.

           FCNTL
                Directs <EM>MH</EM> to use the <STRONG>fcntl()</STRONG> system call for kernel-
                level locking.  If you're using a SYS5 system, you may
                want this option.  (See also `FLOCK' and `LOCKF').

           FLOCK
                Directs <EM>MH</EM> to use the <STRONG>flock()</STRONG> system call for kernel-
                level locking.  If you're on a BSD42 system, and
                you're not using NFS to read or write maildrops, you
                should enable this option.  (See also `FCNTL' and
                `LOCKF').

           HESIOD
                Support for HESIOD. This code was contributed, and
                included no documentation.

           LOCKF
                Directs <EM>MH</EM> to use the <STRONG>lockf()</STRONG> system call for kernel-
                level locking.  If you're using NFS to read or write
                maildrops, you should enable this option.  (See also
                `FLOCK' and `FCNTL').

           locname
                Hard-wires the local name for the host <EM>MH</EM> is running
                on.  For example, locname='PICKLE'.  It's probably
                better to either let UNIX tell <EM>MH</EM> this information, or
                to put the information in the host specific <STRONG>mtstailor</STRONG>
                file.

           MORE
                Defines  the location of the <EM>more</EM>(1) program.  On
                ALTOS and DUAL systems, set MORE='/usr/bin/more'.  The
                default is /usr/ucb/more.

           NDIR
                For non-Berkeley UNIX systems, this <EM>MH</EM> will try to
                find the new directory access mechanism by looking in
                <STRONG>&lt;ndir.h&gt;</STRONG> if this option is given.  Otherwise, <EM>MH</EM> will
                try <STRONG>&lt;dir.h&gt;</STRONG>.  If you still can't get this to work on
                your system, edit <STRONG>h/local.h</STRONG> as appropriate.  (See also
                `SYS5DIR'.)

           NFS
                Tells <EM>MH</EM> to hack around a problem in the NFS C
                library.  If you get an undefined symbol ruserpass
                when compiling <EM>MH</EM>, you probably need this option.  If,
                however, you include this option and get an undefined
                symbol __ruserpass when compiling, then you should
                omit this option.  (See also `NORUSERPASS'.)

           NOIOCTLH
                Tells <EM>MH</EM> not to include the file <STRONG>&lt;sys/ioctl.h&gt;</STRONG>.  To be
                used on systems where this file is not present.

           NORUSERPASS
                Tells <EM>MH</EM> that your system doesn't have the
                <EM>ruserpass</EM>(3) routine; <EM>MH</EM> will include its own copy of
                this routine in its library.  (See also `NFS'.)

           NTOHLSWAP
                Tells <EM>MH</EM> to use the <STRONG>ntohl()</STRONG> macro when processing <EM>msh</EM>
                binary map files.  <EM>MH</EM> can use this macro on systems
                with the include file <STRONG>netinet/in.h</STRONG>, to byte-swap the
                binary information in these map files.  If you're
                using the same map files on machines of different
                architectures, enable this option.

           RENAME
                Include this option if your system has a <STRONG>rename()</STRONG>
                library call.  This is true on BSD42 and newer and
                some SYS5 systems.

           SENDMAILBUG
                Causes SMTP reply code 451 (failure) to be considered
                the same as code 250 (OK).  Since this might cause
                problems, only enable this if you are certain that
                your SendMail will return this code even when it
                doesn't mean to indicate a failure.

           SOCKETS
                Indicates the availability of a socket interface for
                TCP/IP networking that is compatible with 4.{2,3}BSD
                UNIX.  It is not necessary to define this when BSD42
                is already defined, but it might be useful for SYSTEM
                5 or HPUX systems with TCP/IP sockets.

           SUN40
                Use on Sun OS 4.0 (and later?) systems.  You also will
                need options BSD42, options BSD43, and signal void.

                If you're using Sun's brain-damaged approach to
                offering Domain Name Service through NIS, be sure to
                include options BIND and ldoptions -lresolv to work
                around some NIS/DNS bugs.

           SYS5
                Use on AT&amp;T SYSTEM 5 R3 (and newer?) UNIX systems.
                See also <EM>mailgroup</EM>.

           SYS5DIR
                Define this if your system uses struct dirent instead
                of struct direct.  This is true of System V Release
                3.0 and later.  Uses include file <STRONG>&lt;dirent.h&gt;</STRONG> and the
                routines <EM>mkdir</EM>, <EM>rmdir</EM> and <EM>getcwd</EM>.

           SVR4
                Use on AT&amp;T SYSTEM 5 R4 (and newer?) UNIX systems. You
                should also include options SYS5 and options SYS5DIR.
                See also <EM>mailgroup</EM>.  You will also need to include
                oldload none if your <STRONG>ld</STRONG> doesn't handle `-x -r'
                correctly.

           TERMINFO
                Define TERMINFO if you have it.  You get it
                automatically if you're running SYS5, and you don't
                get it if you're not.  (If you're not SYS5, you
                probably have termcap.)

           TZNAME
                Use time zone names from the <EM>tzname</EM> variable, set via
                <EM>tzset</EM>.  Only applicable on SYSTEM 5 systems and only
                effective when you have asked for alpha-timezones (see
                the ATZ option).  See also ZONEINFO.

           UNISTD
                Include this option if your system has the file
                <STRONG>&lt;unistd.h&gt;</STRONG>.  If not specified, the LOCKF option will
                include <STRONG>&lt;sys/fcntl.h&gt;</STRONG>.

           V7
                Use on V7 UNIX systems.  Also, be sure to use options
                void=int.

           VSPRINTF
                Include this option if your system has the <EM>vsprintf</EM>(3)
                library routine; otherwise, _<EM>doprnt</EM>(3) will be used.

           WAITINT
                BSD42 based systems call the <EM>wait</EM>(2) system routine
                with a pointer to type <EM>union</EM> <EM>wait</EM>.  Include this
                option if you included options BSD42, but your system
                calls the <EM>wait</EM>(2) system routine with a pointer to
                type <EM>int</EM> (the non-BSD42 default).

           ZONEINFO
                Specify this if you have a BSD43 based system that
                keeps time zone information /etc/zoneinfo or
                /usr/lib/zoneinfo (SunOS), and where the <EM>struct</EM> <EM>tm</EM>
                returned by <EM>localtime</EM>(3) contains a <EM>tm_gmtoff</EM> element
                (see <STRONG>/usr/include/time.h</STRONG>).  With this fix the GMT
                offset specified in outgoing mail will be corrected
                when the TZ enviornment variable is set to a different
                time zone.  See also TZNAME.

     <STRONG>Site</STRONG> <STRONG>Preferences</STRONG>
        These options change the default behavior of <EM>MH</EM> or enable
        optional features.  Add the options which are appropriate for
        your configuration or your site preferences.

        editor: prompter
             The default editor for <EM>MH</EM>.

        options:
             `-D' options to <EM>cc</EM>(1).

          ATZ
               Directs <EM>MH</EM> to use alpha-timezones whenever possible.
               You should not use this option if you are on the
               Internet, since it will make your host non-compliant
               with RFC-1123 (Requirements for Internet Hosts).

          ATHENA
               Makes <EM>repl</EM> `-nocc all' the default instead of
               `-cc all'.  You may want to enable this if you're using
               <EM>xmh</EM>.

          BANG
               Directs <EM>MH</EM> to favor `!' over `@' in addressing.

          BERK
               Optional for for 4.{2,3}BSD sites running SendMail.
               Disables nearly all of the RFC822 address and header-
               parsing routines in favor of recognizing such formats
               as ASCnet, and so on.  If you don't need to disable the
               parser for this reason, you probably want to use
               options DUMB instead.

          COMPAT
               If you previously ran a version of <EM>MH</EM> earlier than mh.4
               use this option.  After a short grace period, remove it
               and re-{configure,generate,install} everything.

          DUMB
               Directs <EM>MH</EM> not to try and rewrite addresses to their
               official form.

          FOLDPROT
               Defines the octal value for default folder-protection.
               For example, FOLDPROT='0700'.  The default is 0711.

          ISI
               When using repl -ccme, only cc: the first address found
               which belongs to the user; any other <EM>Alternate</EM>-
               <EM>Mailboxes</EM> do not receive cc:s.

          LINK
               Defines the filename for alternate file name for <EM>dist</EM>
               and <EM>repl</EM>.  For example, LINK='\\043' to use the
               pound-sign character.  The default is @.

          MHE
               Enables crude support for Brien Reid's MHE interface.
               Recommended for use with the GNU Emacs mh-e package.

          MHRC
               Enables <EM>MH</EM> to recognize the <EM>CShell</EM>'s `~'-construct.
               This is useful for sites that run with a ~/.mhrc for
               their users.

          MIME
               Enables support for multi-media messages, as specified
               in RFC 1341 -- a major win.  This allows you to include
               things like audio, graphics, and the like, in your mail
               messages.  Several <EM>MH</EM> commands are extended to support
               these multi-media messages, and the <EM>mhn</EM> command is
               provided to encode and decode <STRONG>MIME</STRONG> messages.  For more
               details, see <STRONG>miscellany/multi-media/READ-ME</STRONG> and <EM>mhn</EM>(1).

          MSGID
               Enables <STRONG>slocal</STRONG> to detect and surpress duplicate
               messages received.  This code uses the <STRONG>&lt;ndbm.h&gt;</STRONG>
               library, and requires options BSD42 since it uses the
               <EM>flock</EM>(2) system call for locking.  (Note that this
               means its database locking does not work over NFS.) It
               has only been tested under SUN40.

          MSGPROT
               Defines the octal value for default folder-protection.
               For example, MSGPROT='0600'.  The default is 0644.

          NOMHSEQ
               Directs <EM>MH</EM> to make private sequences the default.

          OVERHEAD
               Enable <EM>MH</EM> commands to read profile/context from open
               fd:s without doing an open(); see <EM>mh</EM>-<EM>profile</EM>(5) for the
               details.

          RPATHS
               Directs <EM>inc</EM> to note UNIX From  lines as Return-Path:
               info.

          SBACKUP
               Defines the prefix string for backup file names.  For
               example, SBACKUP='\\043'.  The default is ,.

          TMA
               Support for the TTI <EM>trusted</EM> <EM>mail</EM> <EM>agent</EM> (TMA).  Although
               the TTI TMA is <STRONG>not</STRONG> in the public domain, the <EM>MH</EM> support
               for the TTI TMA <STRONG>is</STRONG> in the public domain.  You should
               enable this option only if you are licensed to run the
               TMA software (otherwise, you don't have the software in
               your <EM>MH</EM> source tree).

          TTYD
               Support for TTYD.  This is no longer in wide use, and
               is not recommended.

          UCI
               First, _ and # are recognized as the prefixes for
               scratch files.  Second, support for the UCI
               group-leadership mechanism is enabled in <EM>conflict</EM>.
               Third, the first line of the file file <STRONG>$HOME/.signature</STRONG>
               is used as the <EM>Full</EM> <EM>Name</EM> part of your From: header.
               This may conflict with the interpretation of this file
               by <EM>News</EM>.  If you're not at UCI, you probably don't want
               this option.

          UK
               Directs the <EM>scan</EM> program to generate UK-style dates by
               default.

          WHATNOW
               Enable certain <EM>MH</EM> commands to act differently when
               $mhdraft set.

          YEARMOD
               This option makes the <EM>mh</EM>-<EM>format</EM> <STRONG>%(year)</STRONG> function always
               return a value less than 100.  Enable this option if
               you have local <EM>mh</EM>-<EM>format</EM>(5) files which cannot handle
               4-digit years.  You should convert these files to use a
               4-character field width, or use the <STRONG>%(modulo</STRONG> <STRONG>100)</STRONG>
               function to obtain a 2-digit year value.  After a short
               grace period, remove `YEARMOD' and re-
               {configure,generate,install} everything.

     <STRONG>Testing/debugging</STRONG>
       debug: off
            Support for debug mode of <EM>MH</EM>.  Don't use this unless you
            know what you're doing, which isn't likely if you're
            reading this document!

       regtest: off
            Set this to on if you are doing regression testing among
            different compilations of <EM>MH</EM>, and you do not want the
            hostname and compile date included in <EM>MH</EM> binaries.



          Now edit <STRONG>conf/config/mtstailor</STRONG>, depending on your choice of
          the setting for mts in the <EM>MH</EM> configuration file.  for an
          mts setting of mh, look at the file <STRONG>conf/tailor/mhmts</STRONG>; for
          an mts setting of sendmail, sendmail/smtp, mmdf/smtp, or
          mmdf2/smtp, look at the file <STRONG>conf/tailor/sendmts</STRONG>; and, for
          an mts setting of mmdf, or  mmdf2, look at the file
          <STRONG>conf/tailor/mmdf</STRONG>.

          Now install the configured files into the source areas.  (On
          SYS5 systems, or other systems where you get complaints
          about _index and _rindex being undefined, you should use
          make sys5 to compile mhconfig.)

          % make
          % ./mhconfig MH

          <STRONG>Before</STRONG> <STRONG>proceeding</STRONG>, you should familiarize yourself with the
          <EM>Administrator</EM>'<STRONG>s</STRONG> <EM>Guide</EM>.  To generate an <EM>nroff</EM> version, go to
          the doc/ directory and type:

          % (cd ../doc/; make ADMIN.doc)


          If you're already running <EM>MH</EM> at your site, you should also
          read the <EM>mh</EM> changes document <STRONG>CHANGES</STRONG>.  The source is in
          <STRONG>papers/changes/</STRONG>.

          After reading the <EM>Administrator</EM>'<STRONG>s</STRONG> <EM>Guide</EM>, you may decide to
          change your MH configuration.  If so, cd back to the <STRONG>conf/</STRONG>
          directory, re-edit the files <STRONG>MH</STRONG> and <STRONG>conf/config/mtstailor</STRONG>,
          and re-run <EM>mhconfig</EM>.

          You now proceed based on your choice of a transport system
          (the setting for mts above).  The best interface is achieved
          with sendmail followed by mmdf or (mmdf2), and then mh
          (stand-alone delivery, not recommended).

        <STRONG>SENDMAIL</STRONG>
          If you have not enabled BBoards or POP then no further
          MTS-specific action is required on your part!

          If you have enabled POP, but you want to let <EM>SendMail</EM>
          deliver mail POP mail using its standard delivery program
          <STRONG>/bin/mail</STRONG>, then, again, no further MTS-specific action is
          required on your part!

          Otherwise, go to the mts/sendmail/ directory.
          % cd ../mts/sendmail/

          This directory contains files whose definitions correspond
          to the configuration of your <EM>SendMail</EM> system.  If you have
          enabled BBoards or POP service, then you will need to
          re-configure <EM>SendMail</EM>.  First, in the local info section of
          your site's <EM>SendMail</EM> configuration file, choose a free
          macro/class (B is used in this distribution), and add these
          lines:

               # BBoards support
               DBbboards
               CBbboards

          Second, immediately after the inclusion of the zerobase
          file, in the machine dependent part of ruleset zero section,
          add these lines:

               # resolve names for the BBoards system
               R$+&lt;@$=B&gt;      $#bboards$@$2$:$1        topic@bboards

          Be sure to use tabs when separating these fields.  Third,
          add the line

               include(bboardsMH.m4)

          after the line

               include(localm.m4)

          in your site's <EM>SendMail</EM> configuration file.  Finally, you
          should link the file <STRONG>mts/sendmail/bboardsMH.m4</STRONG> into your
          <EM>SendMail</EM> cf/ directory and re-configure <EM>SendMail</EM>.

          If you have enabled POP service, a similar procedure must be
          used on the POP service host, to re-configure <EM>SendMail</EM>.
          First, in the local info section of your site's <EM>SendMail</EM>
          configuration file, choose a free macro/class (P is used in
          this distribution), and add these lines:

               # POP support
               DPpop
               CPpop

          Second, immediately after the inclusion of the zerobase
          file, in the machine dependent part of ruleset zero section,
          add these lines:

               # resolve names for the POP system
               R$+&lt;@$=P&gt;      $#pop$@$2$:$1            subscriber@pop

          Be sure to use tabs when separating these fields.  Third,
          add the line

               include(popMH.m4)

          after the line

               include(localm.m4)

          in your site's <EM>SendMail</EM> configuration file.  Finally, you
          should link the file <STRONG>mts/sendmail/popMH.m4</STRONG> into your
          <EM>SendMail</EM> cf/ directory and re-configure <EM>SendMail</EM>.

        <STRONG>MMDF</STRONG>
          If you want <EM>MMDF</EM> to be your transport service, and have <STRONG>NOT</STRONG>
          specified mmdf/smtp (or mmdf2/smtp) as your mts setting,
          then go to the mmdf/ directory.  (If you're using mmdf/smtp
          or mmdf2/smtp as your mts setting, then skip to the next
          section.)

          % cd ../mts/mmdf/

          This directory contains files whose definitions correspond
          to the configuration of your <EM>MMDF</EM> system.

          If you're running <EM>MMDF</EM>-<STRONG>I</STRONG>, then copy the following files from
          wherever you keep the <EM>MMDF</EM> sources to this directory:
          mmdf/h/ch.h, mmdf/h/conf.h, utildir/conf_util.h,
          utildir/ll_log.h, mmdf/h/mmdf.h, utildir/util.h,
          mmdf/mmdf_lib.a, and utildir/util_lib.a.

          If you're running <EM>MMDF</EM>-<EM>II</EM>, then copy the following files
          from where you keep the <EM>MMDF</EM> sources to this directory:
          h/ch.h, h/conf.h, h/dm.h, h/ll_log.h, h/mmdf.h, h/util.h,
          and lib/libmmdf.a

          If you have enabled bboards, then the directories
          <STRONG>support/bboards/mmdfI</STRONG> and <STRONG>support/bboards/mmdfII</STRONG> contain
          information you'll need to put a UCI BBoards channel in your
          <EM>MMDF</EM> configuration.  Similarly, if you have enabled option
          mf and are running <EM>MMDF</EM>-<STRONG>I</STRONG>, then the <STRONG>zotnet/mf/mmdfI/</STRONG>
          directory contains information you'll need to put a <EM>UUCP</EM>
          channel in your <EM>MMDF</EM>-<STRONG>I</STRONG> configuration.  Finally, the
          directory <STRONG>support/pop/mmdfII</STRONG> contains information you'll
          need to put a POP channel in your <EM>MMDF</EM>-<EM>II</EM> configuration.

          Note that <EM>MMDF</EM>-<EM>II</EM> is distributed with the BBoards channel,
          although the version in the <EM>MH</EM> distribution might be more
          current, the version in the <EM>MMDF</EM>-<EM>II</EM> distribution has been
          tested with that revision of <EM>MMDF</EM>.

        <STRONG>MMDF/SMTP</STRONG>
          If you are using mmdf/smtp as your mts setting, then no
          further MTS-specific action is required on your part!

        <STRONG>MMDF2/SMTP</STRONG>
          If you are using mmdf2/smtp as your mts setting, then no
          further MTS-specific action is required on your part!

        <STRONG>STAND-ALONE</STRONG> <STRONG>DELIVERY</STRONG>
          If, instead, you want <EM>MH</EM> to handle its own mail delivery,
          then no further MTS-specific action is required on your
          part!

     <STRONG>GENERATION</STRONG>
          Go to the <EM>MH</EM> top-level directory and generate the system.

          % cd ../; make

          This will cause a complete generation of the <EM>MH</EM> system.  If
          all goes well, proceed with installation.  If not, complain,
          as there should be no problems at this step.

     <STRONG>INSTALLATION</STRONG>
          If the directories you chose for the user-programs,
          support-programs and manuals (bin, etc, popdir, slibdir, and
          mandir in the <STRONG>conf/MH</STRONG> file) don't exist, you should create
          them at this point.

          Next, if you enabled support for the UCI BBoards facility,
          then create a login called bboards with the following
          characteristics: home directory is <STRONG>/usr/spool/bboards/</STRONG> with
          mode 755 (actually, use the value for bbhome given in the <EM>MH</EM>
          configuration file), login shell is <STRONG>/bin/csh</STRONG> (or <STRONG>/bin/sh</STRONG>),
          and, encrypted password field is *.  The bboards login
          should own the <STRONG>/usr/spool/bboards/</STRONG> directory.  In addition
          to creating <STRONG>/usr/spool/bboards/</STRONG>, also create
          <STRONG>/usr/spool/bboards/etc/</STRONG> and <STRONG>/usr/spool/bboards/archive/</STRONG>.
          These directories should also be owned by the bboards login.

          If you enabled support for POP, then on the POP service
          host, create a login called pop with the following
          characteristics: home directory is <STRONG>/usr/spool/pop/</STRONG> with mode
          755, login shell is <STRONG>/bin/csh</STRONG>, and, encrypted password field
          is *.  If you don't have <STRONG>/bin/csh</STRONG> on your system (V7), then
          <STRONG>/bin/sh</STRONG> is just fine.  The pop login should own the
          <STRONG>/usr/spool/pop/</STRONG> directory.  You'll also need to add a line
          to the <STRONG>/etc/services</STRONG> file and the <STRONG>/etc/rc.local</STRONG> file, see
          the <EM>Administrator</EM>'<STRONG>s</STRONG> <EM>Guide</EM>  for more details.

          If this is not the first time you have installed <EM>MH</EM>, these
          files will need particular attention:

               <EM>Directory</EM>                 <EM>Files</EM>
               etc/                      MailAliases, BBoardAliases, mtstailor
               /usr/spool/bboards/       BBoards, .cshrc, .mh_profile
               /usr/spool/bboards/etc/   *

          The <STRONG>MailAliases</STRONG>, <STRONG>BBoardAliases</STRONG>, <STRONG>mtstailor</STRONG> and <STRONG>BBoards</STRONG> files
          will <STRONG>NOT</STRONG> be installed over existing copies; you will need to
          edit these by hand and merge in any changes from your
          previous <EM>MH</EM> release.  The other files under
          <STRONG>/usr/spool/bboards/</STRONG> will be overwritten if they exist.  You
          may wish to preserve your old versions of these before
          installing <EM>MH</EM>.

          As the super-user, and from the mh.6/ directory, install the
          system.

          # make inst-all

          This will cause the <EM>MH</EM> processes and files to be transferred
          to the appropriate areas with the appropriate attributes.

     <STRONG>TAILORING</STRONG>
          See the <EM>Administrator</EM>'<STRONG>s</STRONG> <EM>Guide</EM> for information on tailoring
          <EM>MH</EM> for the MTS, BBoards, and POP.

     <STRONG>DOCUMENTATION</STRONG>
          In addition to this document, the <EM>Administrator</EM>'<STRONG>s</STRONG> <EM>Guide</EM>, and
          the <EM>User</EM>'<STRONG>s</STRONG> <EM>Manual</EM>, there are several documents referenced by
          the user's manual which may be useful.  The sources for all
          of these can be found under the <STRONG>papers/</STRONG> directory.

     <STRONG>OTHER</STRONG> <STRONG>THINGS</STRONG>
          Consult the directory <STRONG>miscellany/</STRONG> for the sources to a
          number of things which aren't part of the mainstream <EM>MH</EM>
          distribution, but which are still quite useful.

     <STRONG>FILES</STRONG>
          Too numerous to mention.  Really.

     <STRONG>SEE</STRONG> <STRONG>ALSO</STRONG>
          make(1)

     <STRONG>BUGS</STRONG>
          The <EM>mhconfig</EM> program should be smarter.

          There's no way to print the <EM>Administrator</EM>'<STRONG>s</STRONG> <EM>Guide</EM> until
          after you have configured the system; it is difficult to
          configure the system without the <EM>Administrator</EM>'<STRONG>s</STRONG> <EM>Guide</EM>.

          The Makefiles should know when <EM>mhconfig</EM> has been run and
          force make clean behavior.



</PRE>
</BODY>
</HTML>
