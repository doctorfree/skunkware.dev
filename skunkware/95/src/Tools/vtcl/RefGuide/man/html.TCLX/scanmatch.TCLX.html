<HTML>
<BODY>
<TITLE>scanmatch(TCLX)</TITLE>
<A HREF=/cgi-bin/getnav/man/html.TCLX/scanmatch.TCLX.html><H1>scanmatch(TCLX)</H1></A>
<HR>
<B>scanmatch -- 
specify Tcl commands to be evaluated when <B>regexp</B>(TCL) is matched by a scanfile
</B>
<P>
<H2>Syntax</H2>
<B>scanmatch</B> [<B>-nocase</B>] <I>contexthandle</I> [<I>regexp</I>] <I>commands</I>
<H2>Description</H2>
Specifies Tcl <I>commands</I>, to be evaluated when <I>regexp</I> is matched by a
<B>scanfile</B> command.  The match is added to the scan context specified by
<I>contexthandle</I>.  Any number of match statements may be
specified for a given context.  <I>regexp</I> is a regular expression (see the
<B>regexp</B> command).  If <B>-nocase</B> is specified as the first argument,
the pattern is matched regardless of alphabetic case.
<P>
If <I>regexp</I> is not specified, then a default match is
specified for the scan context.  The default match will be executed when a
line of the file does not match any of the regular expressions
in the current scan context.
<P>
The array <B>matchInfo</B> is available to the Tcl code that is executed
when an expression matches (or defaults).  It contains information about
the file being scanned and where within it the expression was matched.
<P>
<B>matchInfo</B> is local to the top
level of the match command unless declared global at that level
by the Tcl <B>global</B> command.  If it is to
be used as a global, it <I>must</I> be declared global before
<B>scanfile</B> is called (since <B>scanfile</B> sets
<B>matchInfo</B> before the match code is
executed, a subsequent <B>global</B> will override the local variable).
The following array entries are available:
<DL COMPACT>
<P><DT><B>matchInfo</B>(<I>line</I>)<DD>
The text of the line of the file that was matched.
<P><DT><B>matchInfo</B>(<I>offset</I>)<DD>
The byte offset into the file of the first character of
the line that was matched.
<P><DT><B>matchInfo</B>(<I>linenum</I>)<DD>
The line number of the line that was matched. This is relative to the first
line scanned, which is usually, but not necessarily, the first line of the
file.  The first line is line number one.
<P><DT><B>matchInfo</B>(<I>handle</I>)<DD>
The file ID (handle) of the file currently being scanned.
<P><DT><B>matchInfo</B>(<I>copyHandle</I>)<DD>
The file ID (handle) of the file specified by the <B>-copyfile</B> option.
The element does not exist if <B>-copyfile</B> was not specified.
<P><DT><B>matchInfo</B>(<I>submatch0</I>)<DD>
The characters matching the first parenthesized subexpression.
The second will be contained in <B>submatch1</B>, etc.
<P><DT><B>matchInfo</B>(<I>subindex0</I>)<DD>
The list of the starting and ending indices of the string
matching the first parenthesized subexpression.
The second will be contained in <B>subindex1</B>, etc.
</DL>
<P>
All <B>scanmatch</B> patterns that match a line will be processed in the order
in which their
specifications were added to the scan context.  The remainder of the
<B>scanmatch</B> pattern-command pairs may be skipped for a file line if a
<B>continue</B> is executed by the Tcl code of a preceding, matched
pattern.
<P>
If a <B>return</B> is
executed in the body of the match command, the <B>scanfile</B> command
currently in
progress returns, with the value passed to <B>return</B> as its
return value.
<H2>See also</H2>
<UL>
<P><LI>
<A HREF=/cgi-bin/man/man?regexp+TCL><B>regexp</B>(TCL)</A>
<P><LI>
<A HREF=/cgi-bin/man/man?scanfile+TCLX><B>scanfile</B>(TCLX)</A>
</UL>
<LINK HREF=/man/html.TCLX/CONTENTS.html REL=contents>
<LINK HREF=/cgi-bin/getnav/man/html.TCLX/scanmatch.TCLX.html REL=navigate>
<LINK HREF=/cgi-bin/man/man?searchpath+TCLX REL=next>
<LINK HREF=/cgi-bin/man/man?scanfile+TCLX REL=previous>

<!--NAVIGATE <TITLEgReATerTHanNavigational information for scanmatch(TCLX)</TITLEgReATerTHan -->
<!--NAVIGATE <H2gReATerTHanNavigational information for scanmatch(TCLX)</H2gReATerTHan -->
<!--NAVIGATE <ULgReATerTHan -->
<!--NAVIGATE <LIgReATerTHan -->
<!--NAVIGATE Book title: man(TCLX) -->
<!--NAVIGATE <LIgReATerTHan -->
<!--NAVIGATE Next topic:  -->
<!--NAVIGATE <A HREF=/cgi-bin/man/man?searchpath+TCLXgReATerTHansearchpath(TCLX)</AgReATerTHan -->
<!--NAVIGATE <LIgReATerTHan -->
<!--NAVIGATE Previous topic:  -->
<!--NAVIGATE <A HREF=/cgi-bin/man/man?scanfile+TCLXgReATerTHanscanfile(TCLX)</AgReATerTHan -->
<!--NAVIGATE <LIgReATerTHan -->
<!--NAVIGATE <A HREF=/man/html.TCLX/CONTENTS.htmlgReATerTHanTable of contents</AgReATerTHan -->
<!--NAVIGATE </ULgReATerTHan -->
<!--NAVIGATE <BRgReATerTHan -->
<!--NAVIGATE <BRgReATerTHan -->
<!--NAVIGATE <A HREF=/man/html.TCLX/COPYRIGHT.htmlgReATerTHan&#169; 1995 The Santa Cruz Operation, Inc.  All rights reserved</AgReATerTHan -->
<!--NAVIGATE <LINK HREF=/man/html.TCLX/CONTENTS.html REL=contentsgReATerTHan -->
<!--NAVIGATE <LINK HREF=/cgi-bin/man/man?searchpath+TCLX REL=nextgReATerTHan -->
<!--NAVIGATE <LINK HREF=/cgi-bin/man/man?scanfile+TCLX REL=previousgReATerTHan -->
<!--NAVIGATE  -->

