<TITLE>flock</TITLE>
<H1>flock</H1>
<P>
lock files for use by shell scripts
<DL>
<DT><B>Contributed by</B>
<DD>David J. Fiander
<DT><B>Obtained from</B>
<DD>I wrote it
<DT><B>Restrictions</B>
<DD>SCO owns it (because I wrote it.  Ask John MacMillan)

<DT><B>Description</B>
<DD>
This locks files using fcntl file locking.  If the lock
is successfully acquired, then the pid of a process holding
the lock is printed on stdout, otherwise and error message
is printed, and the exit status is the value of errno.
"flock -r" gives a read or shared lock, "flock -w", or just
"flock", gives a write, or exclusive, lock.

<DT><B>Productivity</B>
<DD>great for locking mailboxes while you edit them with vi ;->

<DT><B>Safety</B>
<DD>Wrote it.  It's only 2 screens long.

<DT><B>Work Planned</B>
<DD>None

<DT><B>Documentation</B>
<DD>None

<DT><B>Verification</B>
<DD>say "flock <existing file>", see a pid.  try again.  It
should fail.  Kill the given pid, and try the lock again.
NOTE:  If compiled on XENIX, write locks are pretty useless,
since the only locking implemented is mandatory.
</DL>
<P>
<HR>
Note that all this source is configured to be installed under
/usr/skunk.
To build it for a different location, compile with
<em>make CTRBDESTDIR=directory</em>.
