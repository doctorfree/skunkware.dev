<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.31
     from iostream.texi on 9 October 1995 -->

<TITLE>The GNU C++ Iostream Library - States</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="iostream_1.html">first</A>, <A HREF="iostream_6.html">previous</A>, <A HREF="iostream_8.html">next</A>, <A HREF="iostream_35.html">last</A> section, <A HREF="iostream_toc.html">table of contents</A>.
<HR>
<H3><A NAME="SEC7" HREF="iostream_toc.html#TOC7">Checking the state of a stream</A></H3>
<P>
Use this collection of methods to test for (or signal) errors and other
exceptional conditions of streams:
<P>
<A NAME="IDX8"></A>
<U>Method:</U> ios::operator void* <B>()</B> <I>const</I><P>
You can do a quick check on the state of the most recent operation on a
stream by examining a pointer to the stream itself.  The pointer is
arbitrary except for its truth value; it is true if no failures have
occurred (<CODE>ios::fail</CODE> is not true).  For example, you might ask for
input on <CODE>cin</CODE> only if all prior output operations succeeded:
<P>
<PRE>
if (cout)
{
  // Everything OK so far
  cin &#62;&#62; new_value;
  ...
}
</PRE>
<P>
<A NAME="IDX9"></A>
<U>Method:</U> ios::operator ! <B>()</B> <I>const</I><P>
In case it is more convenient to check whether something has failed, the
operator <CODE>!</CODE> returns true if <CODE>ios::fail</CODE> is true (an operation
has failed).  For example,
you might issue an error message if input failed:
<P>
<PRE>
if (!cin)
{
  // Oops
  cerr &#60;&#60; "Eh?\n";
}
</PRE>
<P>
<A NAME="IDX10"></A>
<U>Method:</U> iostate <B>ios::rdstate</B> <I>() const</I><P>
Return the state flags for this stream.  The value is from the
enumeration <CODE>iostate</CODE>.  You can test for any combination of
<P>
<DL COMPACT>
<A NAME="IDX11"></A>
<DT><CODE>goodbit</CODE>
<DD>There are no indications of exceptional states on this stream.

<A NAME="IDX12"></A>
<DT><CODE>eofbit</CODE>
<DD>End of file.

<A NAME="IDX13"></A>
<DT><CODE>failbit</CODE>
<DD>An operation has failed on this stream; this usually indicates bad
format of input.

<A NAME="IDX14"></A>
<DT><CODE>badbit</CODE>
<DD>The stream is unusable.
</DL>
<P>
<A NAME="IDX15"></A>
<A NAME="IDX16"></A>
<U>Method:</U> void <B>ios::setstate</B> <I>(iostate <VAR>state</VAR>)</I><P>
Set the state flag for this stream to <VAR>state</VAR> <EM>in addition to</EM>
any state flags already set.  Synonym (for upward compatibility):
<CODE>ios::set</CODE>.
<P>
See <CODE>ios::clear</CODE> to set the stream state without regard to existing
state flags.  See <CODE>ios::good</CODE>, <CODE>ios::eof</CODE>, <CODE>ios::fail</CODE>,
and <CODE>ios::bad</CODE>, to test the state.
<P>
<A NAME="IDX17"></A>
<U>Method:</U> int <B>ios::good</B> <I>() const</I><P>
Test the state flags associated with this stream; true if no error
indicators are set.
<P>
<A NAME="IDX18"></A>
<U>Method:</U> int <B>ios::bad</B> <I>() const</I><P>
Test whether a stream is marked as unusable.  (Whether
<CODE>ios::badbit</CODE> is set.)
<P>
<A NAME="IDX19"></A>
<U>Method:</U> int <B>ios::eof</B> <I>() const</I><P>
True if end of file was reached on this stream.  (If <CODE>ios::eofbit</CODE>
is set.)
<P>
<A NAME="IDX20"></A>
<U>Method:</U> int <B>ios::fail</B> <I>() const</I><P>
Test for any kind of failure on this stream: <EM>either</EM> some
operation failed, <EM>or</EM> the stream is marked as bad.  (If either
<CODE>ios::failbit</CODE> or <CODE>ios::badbit</CODE> is set.)
<P>
<A NAME="IDX21"></A>
<U>Method:</U> void <B>ios::clear</B> <I>(iostate <VAR>state</VAR>)</I><P>
Set the state indication for this stream to the argument <VAR>state</VAR>.
You may call <CODE>ios::clear</CODE> with no argument, in which case the state
is set to <CODE>good</CODE> (no errors pending).
<P>
See <CODE>ios::good</CODE>, <CODE>ios::eof</CODE>, <CODE>ios::fail</CODE>, and
<CODE>ios::bad</CODE>, to test the state; see <CODE>ios::set</CODE> or
<CODE>ios::setstate</CODE> for an alternative way of setting the state.
<P>
<HR>
Go to the <A HREF="iostream_1.html">first</A>, <A HREF="iostream_6.html">previous</A>, <A HREF="iostream_8.html">next</A>, <A HREF="iostream_35.html">last</A> section, <A HREF="iostream_toc.html">table of contents</A>.
</BODY>
</HTML>
