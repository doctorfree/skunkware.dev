<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.31
     from as.texinfo on 5 October 1995 -->

<TITLE>Using as - MIPS Object</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="as_1.html">first</A>, <A HREF="as_217.html">previous</A>, <A HREF="as_219.html">next</A>, <A HREF="as_222.html">last</A> section, <A HREF="as_toc.html">table of contents</A>.
<HR>
<H2><A NAME="SEC220" HREF="as_toc.html#TOC220">MIPS ECOFF object code</A></H2>
<A NAME="IDX742"></A>
<A NAME="IDX743"></A>
<P>
Assembling for a MIPS ECOFF target supports some additional sections
besides the usual <CODE>.text</CODE>, <CODE>.data</CODE> and <CODE>.bss</CODE>.  The
additional sections are <CODE>.rdata</CODE>, used for read-only data,
<CODE>.sdata</CODE>, used for small data, and <CODE>.sbss</CODE>, used for small
common objects.
<A NAME="IDX744"></A>
<A NAME="IDX745"></A>
<P>
When assembling for ECOFF, the assembler uses the <CODE>$gp</CODE> (<CODE>$28</CODE>)
register to form the address of a "small object".  Any object in the
<CODE>.sdata</CODE> or <CODE>.sbss</CODE> sections is considered "small" in this sense.
For external objects, or for objects in the <CODE>.bss</CODE> section, you can use
the <CODE>gcc</CODE> <SAMP>`-G'</SAMP> option to control the size of objects addressed via
<CODE>$gp</CODE>; the default value is 8, meaning that a reference to any object
eight bytes or smaller uses <CODE>$gp</CODE>.  Passing <SAMP>`-G 0'</SAMP> to
<CODE>as</CODE> prevents it from using the <CODE>$gp</CODE> register on the basis
of object size (but the assembler uses <CODE>$gp</CODE> for objects in <CODE>.sdata</CODE>
or <CODE>sbss</CODE> in any case).  The size of an object in the <CODE>.bss</CODE> section
is set by the <CODE>.comm</CODE> or <CODE>.lcomm</CODE> directive that defines it.  The
size of an external object may be set with the <CODE>.extern</CODE> directive.  For
example, <SAMP>`.extern sym,4'</SAMP> declares that the object at <CODE>sym</CODE> is 4 bytes
in length, whie leaving <CODE>sym</CODE> otherwise undefined.
<P>
Using small ECOFF objects requires linker support, and assumes that the
<CODE>$gp</CODE> register is correctly initialized (normally done automatically by
the startup code).  MIPS ECOFF assembly code must not modify the
<CODE>$gp</CODE> register.
<P>
<HR>
Go to the <A HREF="as_1.html">first</A>, <A HREF="as_217.html">previous</A>, <A HREF="as_219.html">next</A>, <A HREF="as_222.html">last</A> section, <A HREF="as_toc.html">table of contents</A>.
</BODY>
</HTML>
