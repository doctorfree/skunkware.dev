<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.31
     from as.texinfo on 5 October 1995 -->

<TITLE>Using as - i386-Float</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="as_1.html">first</A>, <A HREF="as_204.html">previous</A>, <A HREF="as_206.html">next</A>, <A HREF="as_222.html">last</A> section, <A HREF="as_toc.html">table of contents</A>.
<HR>
<H2><A NAME="SEC207" HREF="as_toc.html#TOC207">Floating Point</A></H2>
<A NAME="IDX680"></A>
<A NAME="IDX681"></A>
<P>
All 80387 floating point types except packed BCD are supported.
(BCD support may be added without much difficulty).  These data
types are 16-, 32-, and 64- bit integers, and single (32-bit),
double (64-bit), and extended (80-bit) precision floating point.
Each supported type has an opcode suffix and a constructor
associated with it.  Opcode suffixes specify operand's data
types.  Constructors build these data types into memory.
<A NAME="IDX682"></A>
<A NAME="IDX683"></A>
<A NAME="IDX684"></A>
<A NAME="IDX685"></A>
<P>
<UL>
<LI>
Floating point constructors are <SAMP>`.float'</SAMP> or <SAMP>`.single'</SAMP>,
<SAMP>`.double'</SAMP>, and <SAMP>`.tfloat'</SAMP> for 32-, 64-, and 80-bit formats.
These correspond to opcode suffixes <SAMP>`s'</SAMP>, <SAMP>`l'</SAMP>, and <SAMP>`t'</SAMP>.
<SAMP>`t'</SAMP> stands for temporary real, and that the 80387 only supports
this format via the <SAMP>`fldt'</SAMP> (load temporary real to stack top) and
<SAMP>`fstpt'</SAMP> (store temporary real and pop stack) instructions.

<A NAME="IDX687"></A>
<A NAME="IDX688"></A>
<A NAME="IDX689"></A>
<A NAME="IDX686"></A>
<LI>
Integer constructors are <SAMP>`.word'</SAMP>, <SAMP>`.long'</SAMP> or <SAMP>`.int'</SAMP>, and
<SAMP>`.quad'</SAMP> for the 16-, 32-, and 64-bit integer formats.  The corresponding
opcode suffixes are <SAMP>`s'</SAMP> (single), <SAMP>`l'</SAMP> (long), and <SAMP>`q'</SAMP>
(quad).  As with the temporary real format the 64-bit <SAMP>`q'</SAMP> format is
only present in the <SAMP>`fildq'</SAMP> (load quad integer to stack top) and
<SAMP>`fistpq'</SAMP> (store quad integer and pop stack) instructions.
</UL>
<P>
Register to register operations do not require opcode suffixes,
so that <SAMP>`fst %st, %st(1)'</SAMP> is equivalent to <SAMP>`fstl %st, %st(1)'</SAMP>.
<A NAME="IDX690"></A>
<A NAME="IDX691"></A>
<P>
Since the 80387 automatically synchronizes with the 80386 <SAMP>`fwait'</SAMP>
instructions are almost never needed (this is not the case for the
80286/80287 and 8086/8087 combinations).  Therefore, <CODE>as</CODE> suppresses
the <SAMP>`fwait'</SAMP> instruction whenever it is implicitly selected by one
of the <SAMP>`fn...'</SAMP> instructions.  For example, <SAMP>`fsave'</SAMP> and
<SAMP>`fnsave'</SAMP> are treated identically.  In general, all the <SAMP>`fn...'</SAMP>
instructions are made equivalent to <SAMP>`f...'</SAMP> instructions.  If
<SAMP>`fwait'</SAMP> is desired it must be explicitly coded.
<P>
<HR>
Go to the <A HREF="as_1.html">first</A>, <A HREF="as_204.html">previous</A>, <A HREF="as_206.html">next</A>, <A HREF="as_222.html">last</A> section, <A HREF="as_toc.html">table of contents</A>.
</BODY>
</HTML>
