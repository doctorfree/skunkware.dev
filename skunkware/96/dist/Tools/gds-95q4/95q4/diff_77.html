<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.31
     from diff.texi on 5 October 1995 -->

<TITLE>Comparing and Merging Files - patch Directories</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="diff_1.html">first</A>, <A HREF="diff_76.html">previous</A>, <A HREF="diff_78.html">next</A>, <A HREF="diff_93.html">last</A> section, <A HREF="diff_toc.html">table of contents</A>.
<HR>
<A NAME="IDX99"></A>
<A NAME="IDX100"></A>
<H2><A NAME="SEC77" HREF="diff_toc.html#TOC77">Applying Patches in Other Directories</A></H2>
<P>
The <SAMP>`-d <VAR>directory</VAR>'</SAMP> or <SAMP>`--directory=<VAR>directory</VAR>'</SAMP>
option to <CODE>patch</CODE> makes directory <VAR>directory</VAR> the current
directory for interpreting both file names in the patch file, and file
names given as arguments to other options (such as <SAMP>`-B'</SAMP> and
<SAMP>`-o'</SAMP>).  For example, while in a news reading program, you can patch
a file in the <TT>`/usr/src/emacs'</TT> directory directly from the article
containing the patch like this:
<P>
<PRE>
| patch -d /usr/src/emacs
</PRE>
<P>
Sometimes the file names given in a patch contain leading directories,
but you keep your files in a directory different from the one given in
the patch.  In those cases, you can use the
<SAMP>`-p[<VAR>number</VAR>]'</SAMP> or <SAMP>`--strip[=<VAR>number</VAR>]'</SAMP>
option to set the file name strip count to <VAR>number</VAR>.  The strip
count tells <CODE>patch</CODE> how many slashes, along with the directory
names between them, to strip from the front of file names.  <SAMP>`-p'</SAMP>
with no <VAR>number</VAR> given is equivalent to <SAMP>`-p0'</SAMP>.  By default,
<CODE>patch</CODE> strips off all leading directories, leaving just the base file
names, except that when a file name given in the patch is a relative
file name and all of its leading directories already exist, <CODE>patch</CODE> does
not strip off the leading directory.  (A <DFN>relative</DFN> file name is one
that does not start with a slash.)
<P>
<CODE>patch</CODE> looks for each file (after any slashes have been stripped)
in the current directory, or if you used the <SAMP>`-d <VAR>directory</VAR>'</SAMP>
option, in that directory.
<P>
For example, suppose the file name in the patch file is
<TT>`/gnu/src/emacs/etc/NEWS'</TT>.  Using <SAMP>`-p'</SAMP> or <SAMP>`-p0'</SAMP> gives the
entire file name unmodified, <SAMP>`-p1'</SAMP> gives
<TT>`gnu/src/emacs/etc/NEWS'</TT> (no leading slash), <SAMP>`-p4'</SAMP> gives
<TT>`etc/NEWS'</TT>, and not specifying <SAMP>`-p'</SAMP> at all gives <TT>`NEWS'</TT>.
<P>
<HR>
Go to the <A HREF="diff_1.html">first</A>, <A HREF="diff_76.html">previous</A>, <A HREF="diff_78.html">next</A>, <A HREF="diff_93.html">last</A> section, <A HREF="diff_toc.html">table of contents</A>.
</BODY>
</HTML>
