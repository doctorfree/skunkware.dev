<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.31
     from diff.texi on 5 October 1995 -->

<TITLE>Comparing and Merging Files - Reversed Patches</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="diff_1.html">first</A>, <A HREF="diff_63.html">previous</A>, <A HREF="diff_65.html">next</A>, <A HREF="diff_93.html">last</A> section, <A HREF="diff_toc.html">table of contents</A>.
<HR>
<A NAME="IDX74"></A>
<H3><A NAME="SEC64" HREF="diff_toc.html#TOC64">Applying Reversed Patches</A></H3>
<P>
Sometimes people run <CODE>diff</CODE> with the new file first instead of
second.  This creates a diff that is "reversed".  To apply such
patches, give <CODE>patch</CODE> the <SAMP>`-R'</SAMP> or <SAMP>`--reverse'</SAMP> option.
<CODE>patch</CODE> then attempts to swap each hunk around before applying it.
Rejects come out in the swapped format.  The <SAMP>`-R'</SAMP> option does not
work with <CODE>ed</CODE> scripts because there is too little information in
them to reconstruct the reverse operation.
<P>
Often <CODE>patch</CODE> can guess that the patch is reversed.  If the first
hunk of a patch fails, <CODE>patch</CODE> reverses the hunk to see if it can
apply it that way.  If it can, <CODE>patch</CODE> asks you if you want to have
the <SAMP>`-R'</SAMP> option set; if it can't, <CODE>patch</CODE> continues to apply
the patch normally.  This method cannot detect a reversed patch if it is
a normal diff and the first command is an append (which should have been
a delete) since appends always succeed, because a null context matches
anywhere.  But most patches add or change lines rather than delete them,
so most reversed normal diffs begin with a delete, which fails, and
<CODE>patch</CODE> notices.
<P>
If you apply a patch that you have already applied, <CODE>patch</CODE> thinks
it is a reversed patch and offers to un-apply the patch.  This could be
construed as a feature.  If you did this inadvertently and you don't
want to un-apply the patch, just answer <SAMP>`n'</SAMP> to this offer and to
the subsequent "apply anyway" question--or type <KBD>C-c</KBD> to kill the
<CODE>patch</CODE> process.
<P>
<HR>
Go to the <A HREF="diff_1.html">first</A>, <A HREF="diff_63.html">previous</A>, <A HREF="diff_65.html">next</A>, <A HREF="diff_93.html">last</A> section, <A HREF="diff_toc.html">table of contents</A>.
</BODY>
</HTML>
