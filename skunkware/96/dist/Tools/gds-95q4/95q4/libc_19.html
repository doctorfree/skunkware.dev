<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.31
     from libc.texinfo on 9 October 1995 -->

<TITLE>The Cygnus C Support Library - malloc</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_18.html">previous</A>, <A HREF="libc_20.html">next</A>, <A HREF="libc_140.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<HR>
<A NAME="IDX24"></A>
<A NAME="IDX25"></A>
<A NAME="IDX26"></A>
<A NAME="IDX27"></A>
<A NAME="IDX28"></A>
<A NAME="IDX29"></A>
<H2><A NAME="SEC19" HREF="libc_toc.html#TOC19"><CODE>malloc</CODE>, <CODE>realloc</CODE>, <CODE>free</CODE>---manage memory</A></H2>
<STRONG>Synopsis</STRONG>
<PRE>
#include &#60;stdlib.h&#62;
void *malloc(size_t <VAR>nbytes</VAR>);
void *realloc(void *<VAR>aptr</VAR>, size_t <VAR>nbytes</VAR>);
void free(void *<VAR>aptr</VAR>);

void *_malloc_r(void *<VAR>reent</VAR>, size_t <VAR>nbytes</VAR>);
void *_realloc_r(void *<VAR>reent</VAR>, 
    void *<VAR>aptr</VAR>, size_t <VAR>nbytes</VAR>);
void _free_r(void *<VAR>reent</VAR>, void *<VAR>aptr</VAR>);

</PRE>
<STRONG>Description</STRONG><BR>
These functions manage a pool of system memory.
<P>
Use <CODE>malloc</CODE> to request allocation of an object with at least
<VAR>nbytes</VAR> bytes of storage available.  If the space is available,
<CODE>malloc</CODE> returns a pointer to a newly allocated block as its result.
<P>
If you already have a block of storage allocated by <CODE>malloc</CODE>, but
you no longer need all the space allocated to it, you can make it
smaller by calling <CODE>realloc</CODE> with both the object pointer and the
new desired size as arguments.  <CODE>realloc</CODE> guarantees that the
contents of the smaller object match the beginning of the original object.
<P>
Similarly, if you need more space for an object, use <CODE>realloc</CODE> to
request the larger size; again, <CODE>realloc</CODE> guarantees that the
beginning of the new, larger object matches the contents of the
original object.
<P>
When you no longer need an object originally allocated by <CODE>malloc</CODE>
or <CODE>realloc</CODE> (or the related function <CODE>calloc</CODE>), return it to the
memory storage pool by calling <CODE>free</CODE> with the address of the object
as the argument.  You can also use <CODE>realloc</CODE> for this purpose by
calling it with <CODE>0</CODE> as the <VAR>nbytes</VAR> argument.
<P>
The alternate functions <CODE>_malloc_r</CODE>, <CODE>_realloc_r</CODE>, and <CODE>_free_r</CODE>
are reentrant versions.  The extra argument <VAR>reent</VAR> is a pointer to
a reentrancy structure.
<P>
<BR>
<STRONG>Returns</STRONG><BR>
<CODE>malloc</CODE> returns a pointer to the newly allocated space, if
successful; otherwise it returns <CODE>NULL</CODE>.  If your application needs
to generate empty objects, you may use <CODE>malloc(0)</CODE> for this purpose.
<P>
<CODE>realloc</CODE> returns a pointer to the new block of memory, or <CODE>NULL</CODE>
if a new block could not be allocated.  <CODE>NULL</CODE> is also the result
when you use `<CODE>realloc(<VAR>aptr</VAR>,0)</CODE>' (which has the same effect as
`<CODE>free(<VAR>aptr</VAR>)</CODE>').  You should always check the result of
<CODE>realloc</CODE>; successful reallocation is not guaranteed even when
you request a smaller object.
<P>
<CODE>free</CODE> does not return a result.
<P>
<BR>
<STRONG>Portability</STRONG><BR>
<CODE>malloc</CODE>, <CODE>realloc</CODE>, and <CODE>free</CODE> are specified by the ANSI C
standard, but other conforming implementations of <CODE>malloc</CODE> may
behave differently when <VAR>nbytes</VAR> is zero.
<P>
Supporting OS subroutines required: <CODE>sbrk</CODE>, <CODE>write</CODE> (if WARN_VLIMIT).
<P>
<BR>
<P>
<HR>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_18.html">previous</A>, <A HREF="libc_20.html">next</A>, <A HREF="libc_140.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
