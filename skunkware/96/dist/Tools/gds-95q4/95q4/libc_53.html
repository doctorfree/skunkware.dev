<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.31
     from libc.texinfo on 9 October 1995 -->

<TITLE>The Cygnus C Support Library - fopen</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_52.html">previous</A>, <A HREF="libc_54.html">next</A>, <A HREF="libc_140.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
<HR>
<A NAME="IDX72"></A>
<A NAME="IDX73"></A>
<H2><A NAME="SEC53" HREF="libc_toc.html#TOC53"><CODE>fopen</CODE>---open a file</A></H2>
<STRONG>Synopsis</STRONG>
<PRE>
#include &#60;stdio.h&#62;
FILE *fopen(const char *<VAR>file</VAR>, const char *<VAR>mode</VAR>);

FILE *_fopen_r(void *<VAR>reent</VAR>, 
    const char *<VAR>file</VAR>, const char *<VAR>mode</VAR>);

</PRE>
<STRONG>Description</STRONG><BR>
<CODE>fopen</CODE> initializes the data structures needed to read or write a
file.  Specify the file's name as the string at <VAR>file</VAR>, and the kind
of access you need to the file with the string at <VAR>mode</VAR>.
<P>
The alternate function <CODE>_fopen_r</CODE> is a reentrant version.
The extra argument <VAR>reent</VAR> is a pointer to a reentrancy structure.
<P>
Three fundamental kinds of access are available: read, write, and append.
<CODE>*<VAR>mode</VAR></CODE> must begin with one of the three characters `<CODE>r</CODE>',
`<CODE>w</CODE>', or `<CODE>a</CODE>', to select one of these:
<P>
<DL COMPACT>

<DT><CODE>r</CODE>
<DD>Open the file for reading; the operation will fail if the file does
not exist, or if the host system does not permit you to read it.

<DT><CODE>w</CODE>
<DD>Open the file for writing <EM>from the beginning</EM> of the file:
effectively, this always creates a new file.  If the file whose name you
specified already existed, its old contents are discarded.

<DT><CODE>a</CODE>
<DD>Open the file for appending data, that is writing from the end of
file.  When you open a file this way, all data always goes to the
current end of file; you cannot change this using <CODE>fseek</CODE>.
</DL>
<P>
Some host systems distinguish between "binary" and "text" files.
Such systems may perform data transformations on data written to, or
read from, files opened as "text".
If your system is one of these, then you can append a `<CODE>b</CODE>' to any
of the three modes above, to specify that you are opening the file as
a binary file (the default is to open the file as a text file).
<P>
`<CODE>rb</CODE>', then, means "read binary"; `<CODE>wb</CODE>', "write binary"; and
`<CODE>ab</CODE>', "append binary".
<P>
To make C programs more portable, the `<CODE>b</CODE>' is accepted on all
systems, whether or not it makes a difference.
<P>
Finally, you might need to both read and write from the same file.
You can also append a `<CODE>+</CODE>' to any of the three modes, to permit
this.  (If you want to append both `<CODE>b</CODE>' and `<CODE>+</CODE>', you can do it
in either order: for example, <CODE>"rb+"</CODE> means the same thing as
<CODE>"r+b"</CODE> when used as a mode string.)
<P>
Use <CODE>"r+"</CODE> (or <CODE>"rb+"</CODE>) to permit reading and writing anywhere in
an existing file, without discarding any data; <CODE>"w+"</CODE> (or <CODE>"wb+"</CODE>)
to create a new file (or begin by discarding all data from an old one)
that permits reading and writing anywhere in it; and <CODE>"a+"</CODE> (or
<CODE>"ab+"</CODE>) to permit reading anywhere in an existing file, but writing
only at the end.
<P>
<BR>
<STRONG>Returns</STRONG><BR>
<CODE>fopen</CODE> returns a file pointer which you can use for other file
operations, unless the file you requested could not be opened; in that
situation, the result is <CODE>NULL</CODE>.  If the reason for failure was an
invalid string at <VAR>mode</VAR>, <CODE>errno</CODE> is set to <CODE>EINVAL</CODE>.
<P>
<BR>
<STRONG>Portability</STRONG><BR>
<CODE>fopen</CODE> is required by ANSI C.
<P>
Supporting OS subroutines required: <CODE>close</CODE>, <CODE>fstat</CODE>, <CODE>isatty</CODE>,
<CODE>lseek</CODE>, <CODE>open</CODE>, <CODE>read</CODE>, <CODE>sbrk</CODE>, <CODE>write</CODE>.
<P>
<BR>
<P>
<HR>
Go to the <A HREF="libc_1.html">first</A>, <A HREF="libc_52.html">previous</A>, <A HREF="libc_54.html">next</A>, <A HREF="libc_140.html">last</A> section, <A HREF="libc_toc.html">table of contents</A>.
</BODY>
</HTML>
