<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.31
     from diff.texi on 5 October 1995 -->

<TITLE>Comparing and Merging Files - If-then-else</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="diff_1.html">first</A>, <A HREF="diff_35.html">previous</A>, <A HREF="diff_37.html">next</A>, <A HREF="diff_93.html">last</A> section, <A HREF="diff_toc.html">table of contents</A>.
<HR>
<A NAME="IDX39"></A>
<A NAME="IDX40"></A>
<A NAME="IDX41"></A>
<A NAME="IDX42"></A>
<H2><A NAME="SEC36" HREF="diff_toc.html#TOC36">Merging Files with If-then-else</A></H2>
<P>
You can use <CODE>diff</CODE> to merge two files of C source code.  The output
of <CODE>diff</CODE> in this format contains all the lines of both files.
Lines common to both files are output just once; the differing parts are
separated by the C preprocessor directives <CODE>#ifdef <VAR>name</VAR></CODE> or
<CODE>#ifndef <VAR>name</VAR></CODE>, <CODE>#else</CODE>, and <CODE>#endif</CODE>.  When
compiling the output, you select which version to use by either defining
or leaving undefined the macro <VAR>name</VAR>.
<P>
To merge two files, use <CODE>diff</CODE> with the <SAMP>`-D <VAR>name</VAR>'</SAMP> or
<SAMP>`--ifdef=<VAR>name</VAR>'</SAMP> option.  The argument <VAR>name</VAR> is the C
preprocessor identifier to use in the <CODE>#ifdef</CODE> and <CODE>#ifndef</CODE>
directives.
<P>
For example, if you change an instance of <CODE>wait (&#38;s)</CODE> to
<CODE>waitpid (-1, &#38;s, 0)</CODE> and then merge the old and new files with
the <SAMP>`--ifdef=HAVE_WAITPID'</SAMP> option, then the affected part of your code
might look like this:
<P>
<PRE>
    do {
#ifndef HAVE_WAITPID
        if ((w = wait (&#38;s)) &#60; 0  &#38;&#38;  errno != EINTR)
#else /* HAVE_WAITPID */
        if ((w = waitpid (-1, &#38;s, 0)) &#60; 0  &#38;&#38;  errno != EINTR)
#endif /* HAVE_WAITPID */
            return w;
    } while (w != child);
</PRE>
<P>
You can specify formats for languages other than C by using line group
formats and line formats, as described in the next sections.
<P>
<UL>
<LI><A HREF="diff_37.html#SEC37">Line Group Formats</A>: Formats for general if-then-else line groups.
<LI><A HREF="diff_38.html#SEC38">Line Formats</A>: Formats for each line in a line group.
<LI><A HREF="diff_39.html#SEC39">Detailed If-then-else</A>: A detailed description of if-then-else format.
<LI><A HREF="diff_40.html#SEC40">Example If-then-else</A>: Sample if-then-else format output.
</UL>
<P>
<HR>
Go to the <A HREF="diff_1.html">first</A>, <A HREF="diff_35.html">previous</A>, <A HREF="diff_37.html">next</A>, <A HREF="diff_93.html">last</A> section, <A HREF="diff_toc.html">table of contents</A>.
</BODY>
</HTML>
