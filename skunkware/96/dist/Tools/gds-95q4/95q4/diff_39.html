<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.31
     from diff.texi on 5 October 1995 -->

<TITLE>Comparing and Merging Files - Detailed If-then-else</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="diff_1.html">first</A>, <A HREF="diff_38.html">previous</A>, <A HREF="diff_40.html">next</A>, <A HREF="diff_93.html">last</A> section, <A HREF="diff_toc.html">table of contents</A>.
<HR>
<H3><A NAME="SEC39" HREF="diff_toc.html#TOC39">Detailed Description of If-then-else Format</A></H3>
<P>
For lines common to both files, <CODE>diff</CODE> uses the unchanged line
group format.  For each hunk of differences in the merged output
format, if the hunk contains only lines from the first file,
<CODE>diff</CODE> uses the old line group format; if the hunk contains only
lines from the second file, <CODE>diff</CODE> uses the new group format;
otherwise, <CODE>diff</CODE> uses the changed group format.
<P>
The old, new, and unchanged line formats specify the output format of
lines from the first file, lines from the second file, and lines common
to both files, respectively.
<P>
The option <SAMP>`--ifdef=<VAR>name</VAR>'</SAMP> is equivalent to
the following sequence of options using shell syntax:
<P>
<PRE>
--old-group-format='#ifndef <VAR>name</VAR>
%&#60;#endif /* not <VAR>name</VAR> */
' \
--new-group-format='#ifdef <VAR>name</VAR>
%&#62;#endif /* <VAR>name</VAR> */
' \
--unchanged-group-format='%=' \
--changed-group-format='#ifndef <VAR>name</VAR>
%&#60;#else /* <VAR>name</VAR> */
%&#62;#endif /* <VAR>name</VAR> */
'
</PRE>
<P>
You should carefully check the <CODE>diff</CODE> output for proper nesting.
For example, when using the the <SAMP>`-D <VAR>name</VAR>'</SAMP> or
<SAMP>`--ifdef=<VAR>name</VAR>'</SAMP> option, you should check that if the
differing lines contain any of the C preprocessor directives
<SAMP>`#ifdef'</SAMP>, <SAMP>`#ifndef'</SAMP>, <SAMP>`#else'</SAMP>, <SAMP>`#elif'</SAMP>, or
<SAMP>`#endif'</SAMP>, they are nested properly and match.  If they don't, you
must make corrections manually.  It is a good idea to carefully check
the resulting code anyway to make sure that it really does what you
want it to; depending on how the input files were produced, the output
might contain duplicate or otherwise incorrect code.
<P>
The <CODE>patch</CODE> <SAMP>`-D <VAR>name</VAR>'</SAMP> option behaves just like
the <CODE>diff</CODE> <SAMP>`-D <VAR>name</VAR>'</SAMP> option, except it operates on
a file and a diff to produce a merged file; See section <A HREF="diff_80.html#SEC80">Options to <CODE>patch</CODE></A>.
<P>
<HR>
Go to the <A HREF="diff_1.html">first</A>, <A HREF="diff_38.html">previous</A>, <A HREF="diff_40.html">next</A>, <A HREF="diff_93.html">last</A> section, <A HREF="diff_toc.html">table of contents</A>.
</BODY>
</HTML>
