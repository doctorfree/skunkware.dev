<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.31
     from embed.texi on 19 October 1995 -->

<TITLE>Embed With GNU - MIPSlopts</TITLE>
</HEAD>
<BODY>
Go to the <A HREF="embed_1.html">first</A>, <A HREF="embed_34.html">previous</A>, <A HREF="embed_36.html">next</A>, <A HREF="embed_44.html">last</A> section, <A HREF="embed_toc.html">table of contents</A>.
<HR>
<H4><A NAME="SEC35" HREF="embed_toc.html#TOC35">Linker options</A></H4>
<P>
<H3>MIPS ECOFF object code</H3>
<P>
Assembling for a MIPS ECOFF target supports some additional sections
besides the usual <CODE>.text</CODE>, <CODE>.data</CODE> and <CODE>.bss</CODE>.  The
additional sections are <CODE>.rdata</CODE>, used for readonly data,
<CODE>.sdata</CODE>, used for small data, and <CODE>.sbss</CODE>, used for small
common objects.
<P>
When assembling for ECOFF, the assembler uses the <CODE>$gp</CODE>
(<CODE>$28</CODE>) register to form the address of a "small object".  Any
object in the <CODE>.sdata</CODE> or <CODE>.sbss</CODE> sections is considered
"small" in this sense.  For external objects, or for objects in the
<CODE>.bss</CODE> section, you can use the <CODE>GCC</CODE> <SAMP>`-G'</SAMP> option to control the
size of objects addressed via <CODE>$gp</CODE>; the default value is 8,
meaning that a reference to any object eight bytes or smaller will use
<CODE>$gp</CODE>.  Passing <SAMP>`-G 0'</SAMP> to <CODE>as</CODE> prevents it from using the
<CODE>$gp</CODE> register on the basis of object size (but the assembler uses
<CODE>$gp</CODE> for objects in <CODE>.sdata</CODE> or <CODE>sbss</CODE> in any case).
The size of an object in the <CODE>.bss</CODE> section is set by the
<CODE>.comm</CODE> or <CODE>.lcomm</CODE> directive that defines it.  The size of an
external object may be set with the <CODE>.extern</CODE> directive.  For
example, <SAMP>`.extern sym,4'</SAMP> declares that the object at <CODE>sym</CODE> is
4 bytes in length, whie leaving <CODE>sym</CODE> otherwise undefined.
<P>
Using small ECOFF objects requires linker support, and assumes that the
<CODE>$gp</CODE> register has been correctly initialized (normally done
automatically by the startup code).  MIPS ECOFF assembly code must not
modify the <CODE>$gp</CODE> register.
<P>
<HR>
Go to the <A HREF="embed_1.html">first</A>, <A HREF="embed_34.html">previous</A>, <A HREF="embed_36.html">next</A>, <A HREF="embed_44.html">last</A> section, <A HREF="embed_toc.html">table of contents</A>.
</BODY>
</HTML>
