<HTML><HEAD><TITLE>XV: The Save Window</TITLE></HEAD>
<BODY><H1>The Save Window</H1>
<IMG SRC="fig-170.gif" WIDTH=364 HEIGHT=430>
<P>Damned if it doesn't look suspiciously like the  <I>xv load </I>window!  The  <I>xv save</I>
 window lets you write
images back to disk, presumably after you've modified them.  You can write 
images back in many
different formats, not just the original format.</P>
<P> <B>Warning!</B>
   <I>Images are saved as they are currently shown!</I> (i.e. At the current size, 
with the current color
modification, rotation, cropping, etc. applied.)  The only exceptions to 
this rule are if you are displaying
images on a 1-bit B/W display, or displaying 24-bit images on a non-24-bit 
display.  The fact that such
images have to be dithered in order to be displayed doesn't count as 
'modification', and the file won't be
saved 'as displayed'.  As such, you can manipulate and save color images on 
a 1-bit display, and 24-bit
images on  <I>any</I>
 type of display, even if you can't really see them 'as they are'.</P>
<P>For the most part, the  <I>xv save</I> window operates exactly like the  <I>xv load</I> 
window.  (See "<A HREF="load-window.html">The
Load Window"</A>
 for details.)  Only the differences are listed here.</P>
<P>When the window is opened, it should have the filename of the currently 
loaded file already entered into
the text entry region.  If you click on a file name in the list window, 
this name will be cleared and
replaced with the new name.  Likewise, the 
 <B>Format</B>
 and 
 <B>Colors</B>
 selections will reflect the currently loaded
image.  This behavior can be annoying if you are using  <I>xv</I> to do file format 
conversion, or are routinely
typing the same filename (a piped command, for instance).
</P>
<DL>
<DT><IMG SRC="fig-171.gif" WIDTH=81 HEIGHT=25></DT>
<DD>The 
 <B>Prev Set</B>
 button restores the 
 <B>Format</B>
 and 
 <B>Colors</B>
 choices to the settings
that were used the last time a file was saved during this particular run of 
 <I>xv</I>.


</DD>
<DT><IMG SRC="fig-172.gif" WIDTH=81 HEIGHT=25></DT>
<DD>Likewise, the 
 <B>Prev Name</B>
 button restores the filename string to the value it had
the last time a file was saved.
</DD>
</DL>
<P>At the top of the window are a pair of pull-down menus, 
 <B>Format</B>
 and 
 <B>Colors</B>
.  These menus let you choose
the image file format and color settings that will be used when you save 
the image.  Normally, they
display the format that the current image is already in.  If you change 
formats, and your filename has a
recognized suffix (i.e., '.gif', '.GIF', '.pbm', etc.), the suffix portion of your filename will be replaced 
with
the new, appropriate suffix for the selected format.</P>
<P>You can pipe output from  <I>xv</I> to other programs by using the  <I>xv save</I> window.  
If the first character of the
specified filename is '!' or '|', the rest of the filename is interpreted as a command to pipe 
output to, in the
currently selected image format.  A fine use for this feature is directly 
printing images to a PostScript
printer by selecting 'PostScript' in the formats list, and typing something 
like "
 <TT>| lpr</TT>
" as the filename.
In this case,  <I>xv</I>
 will create a temporary file, write the PostScript to that file, and cat the contents of that file
to the entered command.   <I>xv</I> will wait for the command to complete.  If the 
command completed
successfully, the  <I>xv save</I> window will disappear.  If the command was 
unsuccessful, the window will
remain visible.  In any event, the temporary file will be deleted.
</P>
<DT><IMG SRC="fig-173.gif" WIDTH=94 HEIGHT=17></DT>
<DD>Normally, when you save an image, it will be saved at the current expansion
(i.e., one screen pixel will map to one image pixel in the saved file).
Sometimes, however, it's desirable to save an image at its original size.  
This is
particularly relevant when you're viewing images larger than your screen.  
By
default,  <I>xv</I> will automatically shrink images so that they fit on the 
screen.  If
you save these images, you'll find that you've lost a lot of data, that 
maybe you
wanted to keep.  That's what this checkbox is here for.  Note: certain
operations, most notably the 
 <B>Smooth</B>
 and 
 <B>Dither</B>
 commands, only affect the
'displayed' image.  If you choose to save an image at its normal size, these
effects will not be in the saved image.

</DD>
<DT><IMG SRC="fig-174.gif" WIDTH=104 HEIGHT=17></DT>
<DD>If you have a selection rectangle drawn on the image, this control can be 
used.
When enabled, only the contents of the selection will be saved.  This can be
very useful if you want to break parts of an image out into their own 
files, as
was done  <I>extensively</I> to put together this documentation.  (i.e.  I 
 <B>Grab</B>
'bed an
 <I>xv</I> window, such as this  <I>save</I> window, moved the selection rectangle around so
that it contained various parts of the image (such as the 'Selected Area' 
button
to the left), and saved these parts in their own separate files, for use 
with
Microsoft Word.)
</DD>
</DL>
<P>One important note:  If your selection goes 'off-screen' (beyond the 
boundaries
of the  <I>xv image</I> window), as can happen when you zoom-in to fine-tune the
position of the selection rectangle, your selection will be  <I>cropped</I> to the 
window
when you save it,  <I>unless</I> you also turn on the 
 <B>Normal</B>
 checkbox.  You can not
save expanded areas of the image that are not visible in the  <I>xv image</I> 
window,
as such areas don't really exist (they aren't computed).</P>
<A NAME="color-choices"><H2>  Color Choices</H2></A>
<P>At the top of the  <I>xv save </I>window there is the 
 <B>Colors </B>
menu, which contains a list of possible color styles to
use when saving the image..  Most file formats support different 
'sub-formats' for 24-bit color, 8-bit
greyscale, 1-bit B/W stippled, etc.  Not all of them do.  Likewise, not all 
'Color' choices are available in
all formats.</P>
<P>In general, the choices in the <B>Colors</B> menu do the following:</P>
<DL>
<DT><IMG SRC="fig-175.gif" WIDTH=151 HEIGHT=16></DT>
<DD>Saves the image as currently shown with all color modifications,
cropping, rotation, flipping, resizing, and smoothing.  The image will
be  saved with all of its colors, even if you weren't able to display them
all on your screen.  For example, you can load a color image on a 1-bit
B/W display, modify it, and write it back.  The saved image will still
be full color, even though all you could see on your screen was some
B/W-dithered nightmare.</DD>
<DT><IMG SRC="fig-176.gif" WIDTH=151 HEIGHT=16></DT>
<DD>Like 
 <B>Full Color</B>
, but saves the image in a greyscale format.</DD>
<DT><IMG SRC="fig-177.gif" WIDTH=151 HEIGHT=16></DT>
<DD>Like 
 <B>Full Color</B>
, but before saving the image  <I>xv</I> generates a 1-bit-per-
pixel, black-and-white dithered version of the image, and saves that,
instead.</DD>
<DT><IMG SRC="fig-178.gif" WIDTH=151 HEIGHT=16></DT>
<DD>Saves the image as currently shown, with all color modifications,
cropping, rotation, flipping, resizing, and smoothing.  The image will
be saved as shown on the screen,  <I>with as many or few colors</I> as  <I>xv</I> was
able to use on the display.  The major purpose of this is to allow
special effects (color reduction) to be saved, in conjunction with the '-
ncols' command line option.  You will probably never need to use this.</DD>
</DL>

<A NAME="format-notes"><H2>  Format Notes</H2></A>
<DL>
<DT><IMG SRC="fig-179.gif" WIDTH=151 HEIGHT=16></DT>
<DD>While  <I>xv</I> can read both the GIF87a and GIF89a variants of the GIF
format, it will normally write GIF87a.   <I>xv</I> will only write a GIF89a file
if there are image comments to be saved (comment blocks being a
GIF89a extension)..  This is in keeping with the GIF89 specification,
which states that if you don't need any of the features added in GIF89,
you should continue to write GIF87, for greater compatibility with old
GIF87-only readers.
<P>Since GIF only supports one format (up to 8 bits per pixel, with a
colormap), there will be no file size difference between a 
 <B>Full Color</B>
and a 
 <B>Greyscale</B>
 image.  A 
 <B>B/W Dithered</B>
 image, on the other hand,
will be considerably smaller.</P>
<P>If you are currently in 
 <B>24-bit mode</B>
, and you are saving in any color
mode other than 
 <B>B/W Dithered</B>
, the currently selected 24->8
conversion algorithm will be used to generate an 8-bit version of the
current image, and that image will be written.  (See "<A HREF="control-window.html#bit-menu">The
24/8 Bit Menu"</A>
 for more info.)
</P>
</DD>
<DT><IMG SRC="fig-180.gif" WIDTH=151 HEIGHT=16></DT>
<DD>One minor clarification:  'JPEG' is an image compression algorithm,
 <I>not</I> an image file format.  'JFIF' is a file format created by the fine
folks at the Independent JPEG Group for the storage and interchange
of 'JPEG'-ed image data.  As such, it is the de-facto standard for
'JPEG' images.  So, technically, when folks talk about 'JPEG' files,
what they probably mean is 'JFIF' files, but it's not  <I>necessarily</I> so.
Therefore, it is possible to run across 'JPEG' files that  <I>xv</I> can't read,
because they don't adhere to the 'JFIF' file format standard.  Just
thought you'd like to know.

<P> <B>Full Color</B>
 images are written in a 24-bit RGB format, and 
 <B>Greyscale</B>
images are written in an 8-bit greyscale format.  
 <B>B/W Dithered</B>
images should  <I>not</I> be used, as they will probably wind up being larger
than 
 <B>Greyscale</B>
 versions of the same images, due to the way JPEG
works.  Note:  You cannot write a 
 <B>Reduced Color</B>
 JPEG file.  Trust
me, given the method that JPEG uses to compress, it's not in your best
interest to save 
 <B>Reduced Color</B>
 JPEG files.  If you attempt to do so, a
 <B>Full Color</B>
 JPEG file will be saved.
</P>
<IMG SRC="fig-181.gif" WIDTH=414 HEIGHT=230>
<P>When you save in the JPEG format, the dialog box shown above will
pop up and ask you for a quality setting and a smoothing value.  '75%'
is the default quality value, and really, it's a fine choice.  You
shouldn't have to change it under normal circumstances.  The lower
you set the quality, the higher the compression ratio will be (i.e., the
JPEG file will be smaller).  Note that setting the quality setting to
'100%' will  <I>not</I> result in 'lossless JPEG' (i.e., the original and the
JPEG'd images will  <I>not</I> be exactly the same, just very close).
</P>
<P>The smoothing value is used to 'blur' images before saving them.  It's
often a good idea to blur GIF (and other 8-bit color) images before
saving them, as you'll get better compression that way, and it also may
partially undo the dithering that been done to many 8-bit images.  On
the downside, you'll also get somewhat blurred images.  Something
you have to decide for yourself.</P>
<P>Note:  The JPEG support in  <I>xv</I> is optional.  While it is normally
enabled, it is possible that it may not be enabled on your system (due
to problems compiling the JPEG library, or something).  If this is the
case, you won't have a 
 <B>JPEG</B>
 selection in the 
 <B>Format</B>
 menu.  Please
feel free to complain to whomever built the binary that you're using.
</P>
</DD>

<DT><IMG SRC="fig-182.gif" WIDTH=151 HEIGHT=16></DT>
<DD> <B>Full Color</B>
 and 
 <B>Reduced Color</B>
 images are written in a 24-bit RGB
format, and 
 <B>Greyscale</B>
 images are written in an 8-bit greyscale format.
 <B>B/W Dithered</B>
 images are written in a 1-bit B/W format.
</P>
<IMG SRC="fig-183.gif" WIDTH=294 HEIGHT=190>
<P>When you save in the TIFF format, the dialog box shown above will
pop up and ask you which type of image compression it should use.
 <B>None</B>
, 
 <B>LZW</B>
, and 
 <B>PackBits</B>
 compression types are available for use
with all the Color modes.  In addition, there are two 
 <B>B/W Dithered</B>
-
only algorithms, 
 <B>CCITT Group3</B>
 and 
 <B>CCITT Group4</B>
.
<P>Note:  The TIFF support in  <I>xv</I> is optional.  While it is normally
enabled, it is possible that it may not be enabled on your system (due
to problems compiling the TIFF library, or something).  If this is the
case, you won't have a 
 <B>TIFF</B>
 selection in the 
 <B>Format</B>
 menu.  Please
feel free to complain to whomever built the binary that you're using.
</P>
</DD>
<DT><IMG SRC="fig-184.gif" WIDTH=151 HEIGHT=16></DT>
<DD> <B>Full Color</B>
 and 
 <B>Reduced Color</B>
 images are stored in a 24-bit RGB
format, 
 <B>Greyscale</B>
 images are stored in an 8-bit greyscale format, and
 <B>B/W Dithered</B>
 images are stored in a 1-bit B/W format.
<P> <I>xv</I> writes Encapsulated PostScript, so you can incorporate  <I>xv</I>-generated
PostScript into many desktop-publishing programs.   <I>xv</I> also prepends
some color-to-greyscale code, so even if your printer doesn't support
color, you can still print 'color' PostScript images.  These images will
be three times larger (in file size) than their greyscale counterparts, so
it's a good idea to save 
 <B>Greyscale</B>
 PostScript, unless you know you
may be printing the file on a color printer at some point.</P>
<P>Also, you should probably never need to generate 
 <B>B/W Dithered</B>
PostScript, as every PostScript printer I've ever heard of can print
greyscale images.  The only valid cases I can think of are:  A) doing it
for a special effect, and B) doing it to generate a much smaller
(roughly 1/8
th
 the size) PostScript file.</P>
<P>Note:  When you try to save a PostScript file, the  <I>xv postscript</I> window
will pop up to let you specify how you want the image printed.
(See "<A HREF="postscript-window.html">The PostScript Window"</A>
, for details.)
</P>
</DD>
<DT><IMG SRC="fig-185.gif" WIDTH=151 HEIGHT=16></DT>
<DD> <B>Full Color</B>
 images are saved in 
 <B>PPM</B>
 format.  
 <B>Greyscale</B>
 images are
saved in 
 <B>PGM</B>
 format.  
 <B>B/W Dithered</B>
 images are saved in 
 <B>PBM</B>
format.  Each of these formats are tailored to the data that they save,
so PPM images are larger than PGM images, which are in turn larger
than PBM images.

<P>In the 
 <B>raw</B>
 variation of the PBM formats, the header information is
written in plain ASCII text, and the image data is written as binary
data.  This is the more popular of the two dialects of PBM, as it
produces considerably smaller image files.
</P>
</DD>
<DT><IMG SRC="fig-186.gif" WIDTH=151 HEIGHT=16></DT>
<DD>Like 
 <B>PBM/PPM (raw)</B>
, only the image data is written as ASCII
text.  As such, images written in this format will be several times
larger than images written in 
 <B>PBM/PGM/PPM (raw)</B>
.  This is a
pretty good format for interchange between systems because it is easy
to parse.  Also, since they are pure, printable ASCII text, images saved
in this format can be mailed, without going through a  <I>uuencode</I>-like
program.</P>
<P>Note that  <I>xv</I>-created PBM files (both 
 <B>raw </B>
and 
 <B>ascii </B>
variants) may
break some PBM readers that do not correctly parse comments.  If
your PBM reader cannot parse comments, you can easily edit the PBM
file and remove the comment lines.  A comment is everything from a
"#" character to the end of the line.
</P>
</DD>
<DT><IMG SRC="fig-187.gif" WIDTH=151 HEIGHT=16></DT>
<DD>Saves files in the format used by the  <I>bitmap</I> program, which is part of
the standard X11 distribution.  Since bitmap files are inherently 1-bit
per pixel, you can only select the 
 <B>B/W Dithered</B>
 option for this
format.

</DD>
<DT><IMG SRC="fig-188.gif" WIDTH=151 HEIGHT=16></DT>
<DD>New to  <I>xv </I>version 3.10, you can now load and save images in the
XPM (X PixMap) format.  Such files are best suited to small-ish
images with a small number of colors, such as multi-color icons, and
the like.  One nifty feature of this format is that images can be created
and edited using a text editor.  All color choices work as expected.
One warning:   <I>xv</I> will not write out an XPM file with more than 256
different colors.  If you are viewing a 24-bit image and save it as an
XPM file,  <I>xv</I> will first compute an 8-bit version of the image using the
current 24->8 conversion algorithm (see "<A HREF="control-window.html#bit-menu">The 24/8 Bit
Menu"</A>
), and then save that.

</DD>
<DT><IMG SRC="fig-189.gif" WIDTH=151 HEIGHT=16></DT>
<DD> <I>xv</I> will write a number of different types of BMP files depending on
the 8/24 bit mode that you're in, the number of colors in the image,
and the current 'Colors' choice.
<P>If you are currently in 
 <B>8-bit Mode</B>
, and you select 
 <B>Full Color</B>
,
 <B>Reduced Color,</B>
 or 
 <B>Greyscale</B>
,  <I>xv</I> will write out an uncompressed 4-
or 8-bits per pixel BMP file, based on the number of different colors in
the current image.</P>
<P>If you are in 
 <B>24-bit Mode</B>
 and you select 
 <B>Full Color</B>
, the program will
write out an uncompressed 24-bits per pixel image.</P>
<P>If you are in 
 <B>24-bit Mode</B>
 and you select 
 <B>Greyscale</B>
, an uncompressed
8-bit per pixel BMP file will be written.</P>
<P>If you select 
 <B>B/W Dither</B>
, a 1-bit per pixel BMP file will be written.
</P>
</DD>
<DT><IMG SRC="fig-190.gif" WIDTH=151 HEIGHT=16></DT>
<DD> <B>Full Color</B>
 and 
 <B>Reduced Color</B>
 images are stored in a 24-bit RGB
format, 
 <B>Greyscale</B>
 images are stored in an 8-bit greyscale format, and
 <B>B/W Dithered</B>
 images are stored in a 1-bit B/W format.

</DD>
<DT><IMG SRC="fig-191.gif" WIDTH=151 HEIGHT=16></DT>
<DD>If you select 
 <B>Full Color</B>
 or 
 <B>Reduced Color</B>
, the program will write a
24-bit image.  Otherwise, it will write out an 8-bit image.

</DD>
<DT><IMG SRC="fig-192.gif" WIDTH=151 HEIGHT=16></DT>
<DD>Another new format added to  <I>xv</I> version 3.10.   <I>xv</I> can now read and
write 24-bit uncompressed Targa files.  As such files are about the
only reason folks still use the Targa format, this shouldn't be a
problem.  The color choices will do what you'd expect, but given that
 <I>xv</I> only reads/writes 24-bit Targa files, saving anything but 
 <B>Full Color</B>
would be a waste.

</DD>
<DT><IMG SRC="fig-193.gif" WIDTH=151 HEIGHT=16></DT>
<DD>Saves images in the FITS format, a greyscale-only format used
primarily by astronomers.

</DD>
<DT><IMG SRC="fig-194.gif" WIDTH=151 HEIGHT=16></DT>
<DD>Note:  This format is was developed at Penn, and is rarely seen outside
of Penn.  If you don't know anything about it, trust me, you don't want
to.
<P> <B>Full Color</B>
 images are saved in the 3-plane, 1-band, PM_C format.
 <B>Greyscale</B>
 and 
 <B>B/W Dithered</B>
 images are both saved in the 1-plane,
1-band, PM_C format.  As such, there is no size advantage to saving
in the 
 <B>B/W Dithered</B>
 format.
</P>
</DD>
<DT><IMG SRC="fig-195.gif" WIDTH=151 HEIGHT=16></DT>
<DD>This is not an 'image file format' at all, which is why it appears
separate from the rest of the formats in the 
 <B>Format </B>
menu.  Instead of
saving the current image, what this does is save a list of all the
filenames in the  <I>xv </I>controls window file list.  This file list can be used
in conjunction with the '
 <TT>-flist</TT>
' option.  See "<A HREF="modifying-behavior.html">Modifying xv Behavior"</A>
 for more details.
</DD>
</DL>
<HR>
This document was extracted from the PostScript documentation and
formatted by <A HREF="mailto:rjohnson@shell.com">Roy Johnson</A>.
Much of the process was automated, and may therefore have introduced
errors.  Corrections are appreciated.

</BODY></HTML>
