<HTML>
<HEAD>
<TITLE>DATA and FIELD</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<H3><A HREF="index.html">Index</A>&nbsp;&nbsp;<A HREF="09.00.MINIVEND_TAG_REFERENCE.html">Up</A>&nbsp;&nbsp;<A HREF="09.01.Tag_syntax.html">&lt;&lt;</A>&nbsp;&nbsp;<A HREF="09.03.SET_SETI_and_SCRATCH.html">&gt;&gt;</A>&nbsp;&nbsp;</H3>
<HR>
<H2><A NAME="DATA_and_FIELD">DATA and FIELD</A></H2>
<P>
The <A HREF="#item__data_">[data ...]</A> and <A HREF="#item__field_">[field ...]</A> tags access elements of MiniVend databases. They are the form used outside
of the iterating lists, and can be effectively used to do lookups when the
table, column/field or key/row is conditional based on a previous
operation.

<P>
The following are equivalent for attribute names:

<P>
<PRE>    table ---&gt; base
    col   ---&gt; field --&gt; column
    key   ---&gt; code  --&gt; row
</PRE>
<P>
The [field ...] tag is special in that it looks in any of the tables
defined as <A HREF="#item_ProductFiles">ProductFiles</A>, in that order, for the data, returning the first non-empty value. In most
catalogs, where <A HREF="#item_ProductFiles">ProductFiles</A> is not defined (i.e. the demo), <CODE>[field title 00-0011]</CODE> is equivalent to
<CODE>[data products title 00-0011]</CODE>.

<P>

<FONT SIZE=-1>FAQ:</FONT> Why doesn't [field col=foo key=bar] display
something from my table ``category''?

<P>
It won't if:

<P>
<PRE>    -- &quot;category&quot; is not in the directive ProductFiles
    -- You have multiple ProductFiles and an earlier one has an 
       entry for that key
</PRE>
<DL>
<DT><STRONG><A NAME="item__data">[data table column key]</A></STRONG><DD>
named attributes: <CODE>[data base=&quot;database&quot; field=&quot;field&quot; key=&quot;key&quot;</CODE>

<CODE>value=&quot;value&quot; op=&quot;increment]</CODE>



<P>
Returns the value of the field in any of the arbitrary databases, or from
the variable namespaces. If the option
<CODE>increment=1</CODE> is present, the field will be atomically incremented with the value in <STRONG>value</STRONG>.

<P>
If a DBM-based database is to be modified, it must be flagged writable on
the page calling the write tag. Use <CODE>[tag flag write]products[/tag]</CODE>
to mark the <A HREF="#item_products">products</A> database writable, for example.

<P>
In addition, the <A HREF="#item__data_">[data ...]</A> tag can access a number of elements in the MiniVend session database:

<P>
<PRE>    accesses      Accesses within the last 30 seconds
    arg           The argument passed in a [page ...] or [area ...] tag
    browser       The user browser string
    host          MiniVend's idea of the host (modified by DomainTail)
    last_error    The last error from the error logging
    last_url      The current MiniVend path_info
    logged_in     Whether the user is logged in via UserDB
    pageCount     Number of unique URLs generated
    prev_url      The previous path_info
    referer       HTTP_REFERER string
    ship_message  The last error messages from shipping
    source        Source of original entry to MiniVend
    time          Time (seconds since Jan 1, 1970) of last access
    user          The REMOTE_USER string
    username      User name logged in as (UserDB)
</PRE>
<P>
Databases will hide variables, so don't name a database ``session'',
``scratch'', or any of the other reserved names or you won't be able to use
the <A HREF="#item__data_">[data ...]</A> tag to read them. Case is sensitive, so in a pinch you could call the
database ``Session'', but it would be better not to.

</DD><P><DT><STRONG><A NAME="item__field">[field name code]</A></STRONG><DD>
named attributes: <CODE>[field code=&quot;code&quot; name=&quot;fieldname&quot;]</CODE>



<P>
Expands into the value of the field <EM>name</EM> for the product identified by <EM>code</EM> as found by searching the products database. It will return the first entry
found in the series of <EM>Product Files</EM>. the products database. If you want to constrain it to a particular
database, use the <CODE>[data base name code]</CODE> tag.

</DD><P></DL>
<P>
<HR>

<P ALIGN=CENTER><H3><A HREF="index.html">Index</A>&nbsp;&nbsp;<A HREF="09.00.MINIVEND_TAG_REFERENCE.html">Up</A>&nbsp;&nbsp;<A HREF="09.01.Tag_syntax.html">&lt;&lt;</A>&nbsp;&nbsp;<A HREF="09.03.SET_SETI_and_SCRATCH.html">&gt;&gt;</A>&nbsp;&nbsp;</H3></BODY></HTML>
