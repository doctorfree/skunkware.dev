<HTML>
<HEAD>
<TITLE>Using a Search Cache</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<H3><A HREF="index.html">Index</A>&nbsp;&nbsp;<A HREF="12.00.THE_SEARCH_ENGINE.html">Up</A>&nbsp;&nbsp;<A HREF="12.13.Updating_session_variables_after.html">&lt;&lt;</A>&nbsp;&nbsp;</H3>
<HR>
<H2><A NAME="Using_a_Search_Cache">Using a Search Cache</A></H2>
<P>
Each catalog may maintain a search cache, which is enabled by specifying
<CODE>Yes</CODE> for the <EM>SearchCache</EM> directive in <EM>catalog.cfg</EM>. It operates by developing a 
<FONT SIZE=-1>MD5</FONT> key or 3-byte checksum of the combined parameters
of a search.

<P>
If your catalog frequently specifies category searches in a large catalog,
speed of search return can be increased by a large factor, mostly by
obviating the need for database lookups.

<P>
If you have mostly dynamic session-based content based on user variables,
you should not use SearchCache unless you want to give that up. MiniVend
will not cache pages with dynamic content, and using cache slows down
searches that don't cache.

<P>
If you have the 
<FONT SIZE=-1>MD5</FONT> module installed on Perl, it will be used to generate the cache keys. This will guarantee a unique cache 
<FONT SIZE=-1>ID.</FONT> If you don't have 
<FONT SIZE=-1>MD5</FONT> installed, a 32-bit checksum will be used to create the cache key. It is conceivable, indeed likely in a large catalog, that two separate searches could generate the same 32-bit checksum and return the same cached search.


<P>
The search cache is invalidated when a user hits 
<FONT SIZE=-1>``RELOAD''.</FONT> It can also be invalidated by a <CODE>[set mv_no_cache]1[/set]</CODE> scratch setting, which only takes effect for the next page.

<P>
If you change your product database or any other files you search, you
should reconfigure or the search returns may be wrong. You also may just
remove all files in the tmp/ directory.

<P>
Search caching is disabled on a client-by-client basis if the client
browser does not have cookie capability, for the generated session numbers
would be incorrect otherwise.

<P>
Multiple page returns are also cached. If you <CODE>[set mv_no_count]1[/set]</CODE>
on the calling page, then the user's browser will keep track of the
traveled links.

<P>
The last search can be recalled with <CODE>[page href=&quot;[data session last_search]&quot;]</CODE>.

<P>
<HR>

<P ALIGN=CENTER><H3><A HREF="index.html">Index</A>&nbsp;&nbsp;<A HREF="12.00.THE_SEARCH_ENGINE.html">Up</A>&nbsp;&nbsp;<A HREF="12.13.Updating_session_variables_after.html">&lt;&lt;</A>&nbsp;&nbsp;</H3></BODY></HTML>
