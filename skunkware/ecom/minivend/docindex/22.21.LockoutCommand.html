<HTML>
<HEAD>
<TITLE>LockoutCommand</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<H3><A HREF="index.html">Index</A>&nbsp;&nbsp;<A HREF="22.00.MINIVEND_CFG.html">Up</A>&nbsp;&nbsp;<A HREF="22.20.Locale.html">&lt;&lt;</A>&nbsp;&nbsp;<A HREF="22.22.Mall.html">&gt;&gt;</A>&nbsp;&nbsp;</H3>
<HR>
<H2><A NAME="LockoutCommand">LockoutCommand</A></H2>
<P>
The name of a command (as you would enter it from the shell) that will lock out the host 
<FONT SIZE=-1>IP</FONT> of an offending system. The 
<FONT SIZE=-1>IP</FONT> address will be substituted for the first occurrence of the string %s.


<P>
This will be executed with the user 
<FONT SIZE=-1>ID</FONT> that MiniVend runs under, so any commands that require root access will have to be wrapped with an 
<FONT SIZE=-1>SUID</FONT> program.


<P>
On Linux, you might lock out a host with:

<P>
<PRE>    ipfwadm -I -i deny -S %s
</PRE>
<P>
This would require root permissions, however, under normal circumstances.
You can use <CODE>sudo</CODE> or another method to wrap and allow the command.

<P>
You can write a script which modifies an appropriate access control file, such as .htaccess for your 
<FONT SIZE=-1>CGI</FONT> directory, to do another level of lockout. 
<FONT SIZE=-1>A</FONT> simple command line containing

<CODE>perl -0777 -npi -e 's/deny/deny from %s\ndeny/' /home/me/cgi-bin/.htaccess</CODE>
would work as well (remember, the <CODE>%s</CODE> will become the 
<FONT SIZE=-1>IP</FONT> address of the offending user).

<P>
<PRE>    LockoutCommand   lockout %s
</PRE>
<P>
<HR>

<P ALIGN=CENTER><H3><A HREF="index.html">Index</A>&nbsp;&nbsp;<A HREF="22.00.MINIVEND_CFG.html">Up</A>&nbsp;&nbsp;<A HREF="22.20.Locale.html">&lt;&lt;</A>&nbsp;&nbsp;<A HREF="22.22.Mall.html">&gt;&gt;</A>&nbsp;&nbsp;</H3></BODY></HTML>
