<HTML>
<HEAD>
<TITLE>Controlling page access with UserDB</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<H3><A HREF="index.html">Index</A>&nbsp;&nbsp;<A HREF="17.00.USER_DATABASE.html">Up</A>&nbsp;&nbsp;<A HREF="17.07.Carts.html">&lt;&lt;</A>&nbsp;&nbsp;</H3>
<HR>
<H2><A NAME="Controlling_page_access_with_Use">Controlling page access with UserDB</A></H2>
<P>
You can implement a simple access control scheme with the MiniVend user
database. Controlled pages must reside in a directory which has a file
named <CODE>.access</CODE> that is zero bytes in length. (If it is more than 0 bytes, then only the <EM>RemoteUser</EM> or <EM>MasterHost</EM> may access files in that directory.)

<P>
Set the following variables in <CODE>catalog.cfg</CODE>:

<P>
<PRE>    Variable   MV_USERDB_ACL_TABLE  userdb
    Variable   MV_USERDB_ACL_COLUMN acl
</PRE>
<P>
The <CODE>MV_USERDB_ACL_TABLE</CODE> is the table which controls access, and likewise the <CODE>MV_USERDB_ACL_TABLE</CODE> names the column in that database which will be checked for authorization.

<P>
The database entry should contain the complete MiniVend-style page name of
the page to be allowed. It will not match substrings.

<P>
For example, if the user <CODE>flycat</CODE> followed this link:

<P>
<PRE>    &lt;A HREF=&quot;[area cartcfg/master_edit]&quot;&gt;Edit&lt;/A&gt;
</PRE>
<P>
Access would be allowed if the contents of the userdb were:

<P>
<PRE>    code    acl
    flycat  cartcfg/master_edit
</PRE>
<P>
and disallowed if it were:

<P>
<PRE>    code    acl
    flycat  cartcfg/master_editor
</PRE>
<P>
You can enable access with:

<P>
<PRE>    [userdb function=set_acl location=&quot;cartcfg/master_edit&quot;]
</PRE>
<P>
and disallow access with:

<P>
<PRE>    [userdb function=set_acl
            delete=1
            location=&quot;cartcfg/master_edit&quot;]
</PRE>
<P>
Of course a pre-existing database with the 
<FONT SIZE=-1>ACL</FONT> values will work as well; it need not be in the
UserDB setup.

<P>
<HR>

<P ALIGN=CENTER><H3><A HREF="index.html">Index</A>&nbsp;&nbsp;<A HREF="17.00.USER_DATABASE.html">Up</A>&nbsp;&nbsp;<A HREF="17.07.Carts.html">&lt;&lt;</A>&nbsp;&nbsp;</H3></BODY></HTML>
