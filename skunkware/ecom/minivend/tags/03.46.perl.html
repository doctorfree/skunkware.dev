<HTML>
<HEAD>
<TITLE>perl</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<H3><A HREF="index.html">Index</A>&nbsp;&nbsp;<A HREF="03.00.TAGS.html">Up</A>&nbsp;&nbsp;<A HREF="03.45._page_.html">&lt;&lt;</A>&nbsp;&nbsp;<A HREF="03.47.price.html">&gt;&gt;</A>&nbsp;&nbsp;</H3>
<HR>
<H2><A NAME="perl">perl</A></H2>
<DL>
<DT><STRONG>CALL INFORMATION</STRONG><DD>
Parameters: <STRONG>tables</STRONG>



<P>
Positional parameters in same order.

<P>
<STRONG>The attribute hash reference is passed</STRONG> after the parameters but before the container text argument.
<STRONG>This may mean that there are parameters not shown here.</STRONG>



<P>
Must pass named parameter interpolate=1 to cause interpolation.

<P>
This is a container tag, i.e. [perl] 
<FONT SIZE=-1>FOO</FONT> [/perl]. Nesting: 
<FONT SIZE=-1>NO</FONT>


<P>
Invalidates cache: <STRONG>YES</STRONG>



<P>
Called Routine: 

<P>
ASP/perl tag calls:

<P>
<PRE>    $Tag-&gt;perl(
        {
         tables =&gt; VALUE,
        },
        BODY
    )
  
 OR
 
    $Tag-&gt;perl($tables, $ATTRHASH, $BODY);
</PRE>
<P>
Attribute aliases

<P>
<PRE>            table ==&gt; tables
</PRE>
<P>
<PRE> 
</PRE>
</DD><P><DT><STRONG>DESCRIPTION</STRONG><DD>
<PRE>    [perl]
        $name    = $Values-&gt;{name};
        $browser = $Session-&gt;{browser};
        return &quot;Hi, $name! How do you like your $browser?
    [/perl]
</PRE>
<P>

<FONT SIZE=-1>HTML</FONT> example:

<P>
<PRE>    &lt;PRE mv=perl&gt;
        $name    = $Values-&gt;{name};
        $browser = $Session-&gt;{browser};
        return &quot;Hi, $name! How do you like your $browser?
    &lt;/PRE&gt;
</PRE>
<P>
Perl code can be directly embedded in MiniVend pages. The code is specified
as [perl arguments*] any_legal_perl_code [/perl]. The value returned by the
code will be inserted on the page.

<P>
Object references are available for most MiniVend tags and functions, as
well as direct references to MiniVend session and configuration values.

<P>
<PRE>  $CGI-&gt;{key}               Hash reference to raw submitted values
  $CGI_array-&gt;{key}         Arrays of submitted values
  $Carts-&gt;{cartname}        Direct reference to shopping carts
  $Config-&gt;{key}            Direct reference to $Vend::Cfg
  $DbSearch-&gt;array(@args)   Do a DB search and get results
  $Document-&gt;header()       Writes header lines
  $Document-&gt;send()         Writes to output
  $Document-&gt;write()        Writes to page
  $Scratch-&gt;{key}           Direct reference to scratch area
  $Session-&gt;{key}           Direct reference to session area
  $Tag-&gt;tagname(@args)      Call a tag as a routine (UserTag too!)
  $TextSearch-&gt;array(@args) Do a text search and get results
  $Values-&gt;{key}            Direct reference to user form values
  $Variable-&gt;{key}          Config variables (same as $Config-&gt;{Variable});
  &amp;HTML($html)              Same as $Document-&gt;write($html);
  &amp;Log($msg)                Log to the error log
</PRE>
<P>
For full descriptions of these objects, see <EM>MiniVend Programming</EM>.

<P>
If you wish to use database values in your Perl code, you must pre-open the
<CODE>table(s)</CODE> you will be using. This can be done by including the
table name in the <CODE>tables</CODE> parameter of the Perl tag:

<P>
<PRE>    [perl tables=products]
        $result = &quot;You asked about $Values-&gt;{code}. Here is the description: &quot;;
        $result .= $Tag-&gt;data('products', 'description', $Values-&gt;{code});
        return $result;
    [/perl]
</PRE>
<P>
If you do not do this, your code will fail with a runtime Safe error.

</DD><P></DL>
<P>
<HR>

<P ALIGN=CENTER><H3><A HREF="index.html">Index</A>&nbsp;&nbsp;<A HREF="03.00.TAGS.html">Up</A>&nbsp;&nbsp;<A HREF="03.45._page_.html">&lt;&lt;</A>&nbsp;&nbsp;<A HREF="03.47.price.html">&gt;&gt;</A>&nbsp;&nbsp;</H3></BODY></HTML>
